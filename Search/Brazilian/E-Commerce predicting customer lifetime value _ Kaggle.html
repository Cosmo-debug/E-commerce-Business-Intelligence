<!DOCTYPE html>
<!-- saved from url=(0082)https://www.kaggle.com/dhimananubhav/e-commerce-predicting-customer-lifetime-value -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><style id="react-tooltip">.__react_component_tooltip{border-radius:3px;display:inline-block;font-size:13px;left:-999em;opacity:0;padding:8px 21px;position:fixed;pointer-events:none;transition:opacity 0.3s ease-out;top:-999em;visibility:hidden;z-index:999}.__react_component_tooltip.allow_hover,.__react_component_tooltip.allow_click{pointer-events:auto}.__react_component_tooltip:before,.__react_component_tooltip:after{content:"";width:0;height:0;position:absolute}.__react_component_tooltip.show{opacity:0.9;margin-top:0px;margin-left:0px;visibility:visible}.__react_component_tooltip.type-dark{color:#fff;background-color:#222}.__react_component_tooltip.type-dark.place-top:after{border-top-color:#222;border-top-style:solid;border-top-width:6px}.__react_component_tooltip.type-dark.place-bottom:after{border-bottom-color:#222;border-bottom-style:solid;border-bottom-width:6px}.__react_component_tooltip.type-dark.place-left:after{border-left-color:#222;border-left-style:solid;border-left-width:6px}.__react_component_tooltip.type-dark.place-right:after{border-right-color:#222;border-right-style:solid;border-right-width:6px}.__react_component_tooltip.type-dark.border{border:1px solid #fff}.__react_component_tooltip.type-dark.border.place-top:before{border-top:8px solid #fff}.__react_component_tooltip.type-dark.border.place-bottom:before{border-bottom:8px solid #fff}.__react_component_tooltip.type-dark.border.place-left:before{border-left:8px solid #fff}.__react_component_tooltip.type-dark.border.place-right:before{border-right:8px solid #fff}.__react_component_tooltip.type-success{color:#fff;background-color:#8DC572}.__react_component_tooltip.type-success.place-top:after{border-top-color:#8DC572;border-top-style:solid;border-top-width:6px}.__react_component_tooltip.type-success.place-bottom:after{border-bottom-color:#8DC572;border-bottom-style:solid;border-bottom-width:6px}.__react_component_tooltip.type-success.place-left:after{border-left-color:#8DC572;border-left-style:solid;border-left-width:6px}.__react_component_tooltip.type-success.place-right:after{border-right-color:#8DC572;border-right-style:solid;border-right-width:6px}.__react_component_tooltip.type-success.border{border:1px solid #fff}.__react_component_tooltip.type-success.border.place-top:before{border-top:8px solid #fff}.__react_component_tooltip.type-success.border.place-bottom:before{border-bottom:8px solid #fff}.__react_component_tooltip.type-success.border.place-left:before{border-left:8px solid #fff}.__react_component_tooltip.type-success.border.place-right:before{border-right:8px solid #fff}.__react_component_tooltip.type-warning{color:#fff;background-color:#F0AD4E}.__react_component_tooltip.type-warning.place-top:after{border-top-color:#F0AD4E;border-top-style:solid;border-top-width:6px}.__react_component_tooltip.type-warning.place-bottom:after{border-bottom-color:#F0AD4E;border-bottom-style:solid;border-bottom-width:6px}.__react_component_tooltip.type-warning.place-left:after{border-left-color:#F0AD4E;border-left-style:solid;border-left-width:6px}.__react_component_tooltip.type-warning.place-right:after{border-right-color:#F0AD4E;border-right-style:solid;border-right-width:6px}.__react_component_tooltip.type-warning.border{border:1px solid #fff}.__react_component_tooltip.type-warning.border.place-top:before{border-top:8px solid #fff}.__react_component_tooltip.type-warning.border.place-bottom:before{border-bottom:8px solid #fff}.__react_component_tooltip.type-warning.border.place-left:before{border-left:8px solid #fff}.__react_component_tooltip.type-warning.border.place-right:before{border-right:8px solid #fff}.__react_component_tooltip.type-error{color:#fff;background-color:#BE6464}.__react_component_tooltip.type-error.place-top:after{border-top-color:#BE6464;border-top-style:solid;border-top-width:6px}.__react_component_tooltip.type-error.place-bottom:after{border-bottom-color:#BE6464;border-bottom-style:solid;border-bottom-width:6px}.__react_component_tooltip.type-error.place-left:after{border-left-color:#BE6464;border-left-style:solid;border-left-width:6px}.__react_component_tooltip.type-error.place-right:after{border-right-color:#BE6464;border-right-style:solid;border-right-width:6px}.__react_component_tooltip.type-error.border{border:1px solid #fff}.__react_component_tooltip.type-error.border.place-top:before{border-top:8px solid #fff}.__react_component_tooltip.type-error.border.place-bottom:before{border-bottom:8px solid #fff}.__react_component_tooltip.type-error.border.place-left:before{border-left:8px solid #fff}.__react_component_tooltip.type-error.border.place-right:before{border-right:8px solid #fff}.__react_component_tooltip.type-info{color:#fff;background-color:#337AB7}.__react_component_tooltip.type-info.place-top:after{border-top-color:#337AB7;border-top-style:solid;border-top-width:6px}.__react_component_tooltip.type-info.place-bottom:after{border-bottom-color:#337AB7;border-bottom-style:solid;border-bottom-width:6px}.__react_component_tooltip.type-info.place-left:after{border-left-color:#337AB7;border-left-style:solid;border-left-width:6px}.__react_component_tooltip.type-info.place-right:after{border-right-color:#337AB7;border-right-style:solid;border-right-width:6px}.__react_component_tooltip.type-info.border{border:1px solid #fff}.__react_component_tooltip.type-info.border.place-top:before{border-top:8px solid #fff}.__react_component_tooltip.type-info.border.place-bottom:before{border-bottom:8px solid #fff}.__react_component_tooltip.type-info.border.place-left:before{border-left:8px solid #fff}.__react_component_tooltip.type-info.border.place-right:before{border-right:8px solid #fff}.__react_component_tooltip.type-light{color:#222;background-color:#fff}.__react_component_tooltip.type-light.place-top:after{border-top-color:#fff;border-top-style:solid;border-top-width:6px}.__react_component_tooltip.type-light.place-bottom:after{border-bottom-color:#fff;border-bottom-style:solid;border-bottom-width:6px}.__react_component_tooltip.type-light.place-left:after{border-left-color:#fff;border-left-style:solid;border-left-width:6px}.__react_component_tooltip.type-light.place-right:after{border-right-color:#fff;border-right-style:solid;border-right-width:6px}.__react_component_tooltip.type-light.border{border:1px solid #222}.__react_component_tooltip.type-light.border.place-top:before{border-top:8px solid #222}.__react_component_tooltip.type-light.border.place-bottom:before{border-bottom:8px solid #222}.__react_component_tooltip.type-light.border.place-left:before{border-left:8px solid #222}.__react_component_tooltip.type-light.border.place-right:before{border-right:8px solid #222}.__react_component_tooltip.place-top{margin-top:-10px}.__react_component_tooltip.place-top:before{border-left:10px solid transparent;border-right:10px solid transparent;bottom:-8px;left:50%;margin-left:-10px}.__react_component_tooltip.place-top:after{border-left:8px solid transparent;border-right:8px solid transparent;bottom:-6px;left:50%;margin-left:-8px}.__react_component_tooltip.place-bottom{margin-top:10px}.__react_component_tooltip.place-bottom:before{border-left:10px solid transparent;border-right:10px solid transparent;top:-8px;left:50%;margin-left:-10px}.__react_component_tooltip.place-bottom:after{border-left:8px solid transparent;border-right:8px solid transparent;top:-6px;left:50%;margin-left:-8px}.__react_component_tooltip.place-left{margin-left:-10px}.__react_component_tooltip.place-left:before{border-top:6px solid transparent;border-bottom:6px solid transparent;right:-8px;top:50%;margin-top:-5px}.__react_component_tooltip.place-left:after{border-top:5px solid transparent;border-bottom:5px solid transparent;right:-6px;top:50%;margin-top:-4px}.__react_component_tooltip.place-right{margin-left:10px}.__react_component_tooltip.place-right:before{border-top:6px solid transparent;border-bottom:6px solid transparent;left:-8px;top:50%;margin-top:-5px}.__react_component_tooltip.place-right:after{border-top:5px solid transparent;border-bottom:5px solid transparent;left:-6px;top:50%;margin-top:-4px}.__react_component_tooltip .multi-line{display:block;padding:2px 0px;text-align:center}</style>
    <title>E-Commerce predicting customer lifetime value | Kaggle</title>
    
    <meta name="robots" content="index, follow">
    <meta name="description" content="Explore and run machine learning code with Kaggle Notebooks | Using data from Brazilian E-Commerce Public Dataset by Olist">
    <meta name="turbolinks-cache-control" content="no-cache">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, minimum-scale=1.0">
    <meta name="theme-color" content="#008ABC">
    <script type="text/javascript" async="" src="./E-Commerce predicting customer lifetime value _ Kaggle_files/koj6gxx6"></script><script type="text/javascript" async="" src="./E-Commerce predicting customer lifetime value _ Kaggle_files/js" nonce=""></script><script type="text/javascript" async="" src="./E-Commerce predicting customer lifetime value _ Kaggle_files/analytics.js.download" nonce=""></script><script src="./E-Commerce predicting customer lifetime value _ Kaggle_files/cb=gapi.loaded_0" nonce="" async=""></script><script nonce="" type="text/javascript">
        window["initialPageLoadStartTime"] = new Date().getTime();
    </script>
    <link rel="preconnect" href="https://www.google-analytics.com/" crossorigin="anonymous"><link rel="preconnect" href="https://stats.g.doubleclick.net/"><link rel="preconnect" href="https://js.intercomcdn.com/"><link rel="preconnect" href="https://storage.googleapis.com/"><link rel="preconnect" href="https://apis.google.com/"><link rel="preload" href="https://www.kaggle.com/static/assets/fontawesome-webfont.woff2" as="font" crossorigin="anonymous">
    <link href="https://www.kaggle.com/static/images/favicon.ico" rel="shortcut icon" type="image/x-icon">
    <link rel="manifest" href="https://www.kaggle.com/static/json/manifest.json" crossorigin="use-credentials">
    <link href="./E-Commerce predicting customer lifetime value _ Kaggle_files/css" rel="stylesheet" type="text/css">
    <link href="./E-Commerce predicting customer lifetime value _ Kaggle_files/icon" rel="stylesheet" type="text/css">
        <link rel="canonical" href="https://www.kaggle.com/dhimananubhav/e-commerce-predicting-customer-lifetime-value">
        <link rel="stylesheet" type="text/css" href="./E-Commerce predicting customer lifetime value _ Kaggle_files/vendor.css">
        <link rel="stylesheet" type="text/css" href="./E-Commerce predicting customer lifetime value _ Kaggle_files/app.css">
    
    
 
        <script nonce="">
        try{(function(a,s,y,n,c,h,i,d,e){d=s.createElement("style");
        d.appendChild(s.createTextNode(""));s.head.appendChild(d);d=d.sheet;
        y=y.map(x => d.insertRule(x + "{ opacity: 0 !important }"));
        h.start=1*new Date;h.end=i=function(){y.forEach(x => x<d.cssRules.length ? d.deleteRule(x) : {})};
        (a[n]=a[n]||[]).hide=h;setTimeout(function(){i();h.end=null},c);h.timeout=c;
        })(window,document,['.site-header-react__nav'],'dataLayer',2000,{'GTM-52LNT9S':true});}catch(ex){}
    </script><style></style>
    <script nonce="">
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'UA-12629138-1', {
            'optimize_id': 'GTM-52LNT9S',
            'displayFeaturesTask': null,
            'send_page_view': false
        });
    </script>
    <script nonce="" async="" src="./E-Commerce predicting customer lifetime value _ Kaggle_files/js(1)"></script>

<script nonce="">window.intercomSettings = {"app_id":"koj6gxx6","name":"Alireza Alizadegan","email":"a.r.alizadegan@gmail.com","user_hash":"8f613f4c8b475efb37322dc98c275b062a693a9173a0e4a9e32eff4724ffbc91","created_at":1569088294,"last_visit_date_at":1580768806,"status_id":2,"performance_tier":0,"user_name":"alizadegan","display_name":"Alireza Alizadegan","is_admin":false,"experiment_group":1,"newsletter_subscriber":false,"competition_mailing_list_subscriber":false,"block_emails":false,"competitions_tier":0,"competitions_tier_attained_at":1569097835,"kernels_tier":0,"kernels_tier_attained_at":1569097835,"discussion_tier":0,"discussion_tier_attained_at":1569097835,"datasets_count":0,"host_page_visits":0,"in_class_competitions_hosted_count":0,"last_hour_searches_count":0,"api_has_token":false,"api_has_requests":false};</script>        <script nonce="">(function () { var w = window; var ic = w.Intercom; if (typeof ic === "function") { ic('reattach_activator'); ic('update', intercomSettings); } else { var d = document; var i = function () { i.c(arguments) }; i.q = []; i.c = function (args) { i.q.push(args) }; w.Intercom = i; function l() { var s = d.createElement('script'); s.type = 'text/javascript'; s.async = true; s.src = 'https://widget.intercom.io/widget/koj6gxx6'; var x = d.getElementsByTagName('script')[0]; x.parentNode.insertBefore(s, x); } if (w.attachEvent) { w.attachEvent('onload', l); } else { w.addEventListener('load', l, false); } } })()</script>
    
    
    <meta name="og:url" content="https://kaggle.com/dhimananubhav/e-commerce-predicting-customer-lifetime-value">
    <meta property="og:title" content="E-Commerce predicting customer lifetime value">
    <meta property="og:description" content="Explore and run machine learning code with Kaggle Notebooks | Using data from Brazilian E-Commerce Public Dataset by Olist">
    <meta property="og:type" content="website">
    <meta name="og:image" content="https://storage.googleapis.com/kaggle-avatars/thumbnails/685355-gr.jpg">
    
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@kaggledatasets">


    
    
    <script nonce="" type="application/ld+json">{"@context":"http://schema.org/","@type":"Article","author":{"@type":"Person","name":"dhimananubhav","sameAs":"/dhimananubhav"},"headline":"E-Commerce predicting customer lifetime value","url":"https://www.kaggle.com/dhimananubhav/e-commerce-predicting-customer-lifetime-value","dateModified":"2019-10-25T21:03:25.59","datePublished":"2019-10-25T21:03:25.59","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.kaggle.com/dhimananubhav/e-commerce-predicting-customer-lifetime-value"},"publisher":{"@type":"Organization","name":"Kaggle","sameAs":"https://www.kaggle.com","logo":{"type":"ImageObject","url":"https://www.kaggle.com/static/images/site-logo.png"}},"image":["https://storage.googleapis.com/kaggle-avatars/thumbnails/685355-gr.jpg"]}</script>


    
    
    
<script nonce="" type="text/javascript">
    var Kaggle = Kaggle || {};

    Kaggle.Current = {
        userId: 3743521,
        userProfileUrl: '/alizadegan',
        userDisplayNameEscaped: 'Alireza Alizadegan',
        userThumbnailUrl: 'https://storage.googleapis.com/kaggle-avatars/thumbnails/default-thumb.png',
        userEmail: 'a.r.alizadegan@gmail.com',
        userIsPhoneVerified: false,
        userName: 'alizadegan',
        tier: 'Novice',
        antiForgeryToken: 'CfDJ8LdUzqlsSWBPr4Ce3rb9VL_7wMnxmdNbpy9ll-WS9_4Mx_fhp7XP1Kdk7I5Rhm80KPkotPVlFvkgH_v2SuGMtHpuBrypC4was6LcQ8bE3Mo6IsWWjdbM6spI6EerOzqqnT2zq63QkyqmtS-KodayQ4pMwuiYu-AGbHJ_2Cz2x-tcviuQwfSUu2iOyMGZ3nA5ag',
        isAnonymous: false,
        analyticsToken: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE1ODA3Njk3MzEsIlVzZXJJZCI6Mzc0MzUyMX0.8dOjuL1-pkgEpa9XPjYiRdc4x26betDb0VP-azTCqnI',
        analyticsTokenExpiry: 15,
        internetKernelsEnabled: false,
        
        
        
        
        
        
        mdeImageUploader: true,
        
        
        
        
    }
        Kaggle.Current.log = function(){};
        Kaggle.Current.warn = function(){};

    var decodeUserDisplayName = function () {
        var escapedUserDisplayName = Kaggle.Current.userDisplayNameEscaped || "";
        try {
            var textVersion = new DOMParser().parseFromString(escapedUserDisplayName, "text/html").documentElement.textContent;
            if (textVersion) {
                return textVersion;
            }
        } catch(ex) {}
        return escapedUserDisplayName;
    }
    Kaggle.Current.userDisplayName = decodeUserDisplayName();
</script>

    

<script nonce="" type="text/javascript">
    var Kaggle = Kaggle || {};
    Kaggle.PageMessages = [];
</script>

        <script nonce="" type="text/javascript">
/* <![CDATA[ */
goog_snippet_vars = function() {
    var w = window;
    w.google_conversion_id = 955616553;
    w.google_conversion_label = "QSjvCKDksHMQqZrWxwM";
    w.google_conversion_value = 0.00;
    w.google_conversion_currency = "USD";
    w.google_remarketing_only = false;
    w.google_conversion_language = "en";
    w.google_conversion_format = "3";
    w.google_conversion_color = "ffffff";
}
// DO NOT CHANGE THE CODE BELOW.
goog_report_conversion = function(url) {
    goog_snippet_vars();
    window.google_conversion_format = "3";
    var opt = new Object();
    opt.onload_callback = function() {
        if (typeof(url) != 'undefined') {
            window.location = url;
        }
    }
    var conv_handler = window['google_trackConversion'];
    if (typeof(conv_handler) == 'function') {
        conv_handler(opt);
    }
}
/* ]]> */
    </script>
    <script nonce="" type="text/javascript" src="./E-Commerce predicting customer lifetime value _ Kaggle_files/f.txt">
    </script>



        <script nonce="">window['useKaggleAnalytics'] = true;</script>

    <script id="gapi-target" nonce="" src="./E-Commerce predicting customer lifetime value _ Kaggle_files/api.js.download" defer="" async="" gapi_processed="true"></script>
    <script nonce="" src="./E-Commerce predicting customer lifetime value _ Kaggle_files/vendor.js.download" data-turbolinks-track="reload"></script>
    <script nonce="" src="./E-Commerce predicting customer lifetime value _ Kaggle_files/app.js.download" data-turbolinks-track="reload"></script><style data-styled="" data-styled-version="4.4.0" id="kaggle-sc-1" data-turbolinks-permanent="true"></style><style data-styled="" data-styled-version="4.4.0" id="kaggle-sc-2" data-turbolinks-permanent="true"></style><style data-styled="" data-styled-version="4.4.0" id="kaggle-sc-3" data-turbolinks-permanent="true"></style><style data-styled="" data-styled-version="4.4.0"></style><style data-emotion=""></style>
        <script nonce="">
            (function() {
                if ('serviceWorker' in navigator) {
                    navigator.serviceWorker.register("/static/assets/service-worker.js").then(function(reg) {
                        reg.onupdatefound = function() {
                            var installingWorker = reg.installing;
                            installingWorker.onstatechange = function() {
                                switch (installingWorker.state) {
                                case 'installed':
                                    if (navigator.serviceWorker.controller) {
                                        console.log('New or updated content is available.');
                                    } else {
                                        console.log('Content is now available offline!');
                                    }
                                    break;
                                case 'redundant':
                                    console.error('The installing service worker became redundant.');
                                    break;
                                }
                            };
                        };
                    }).catch(function(e) {
                      console.error('Error during service worker registration:', e);
                    });
                }
            })();
        </script>
        <script nonce="" defer="" src="./E-Commerce predicting customer lifetime value _ Kaggle_files/stackdriver-errors-concat.min.js.download"></script>
        <script nonce="" type="text/javascript">
            window.addEventListener('DOMContentLoaded', function () {
                var errorHandler = new StackdriverErrorReporter();
                errorHandler.start({
                    key: 'AIzaSyDANGXFHtSIVc51MIdGwg4mQFgm3oNrKoo',
                    projectId: 'kaggle-161607',
                    service: 'web-fe',
                    version: '63457f9550af51152856da984397c75a7c396ed8',
                    context: { user: '3743521' }
                });
            });
        </script>
<script charset="utf-8" src="./E-Commerce predicting customer lifetime value _ Kaggle_files/5.a0194a3d4429404b7f87.js.download"></script><style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 2px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 2px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: 1em}
.MathJax_MenuRadioCheck.RTL {right: 1em; left: auto}
.MathJax_MenuLabel {padding: 2px 2em 4px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #CCCCCC; margin: 4px 1px 0px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: Highlight; color: HighlightText}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">.MathJax_Preview .MJXf-math {color: inherit!important}
</style><style type="text/css">.MJX_Assistive_MathML {position: absolute!important; top: 0; left: 0; clip: rect(1px, 1px, 1px, 1px); padding: 1px 0 0 0!important; border: 0!important; height: 1px!important; width: 1px!important; overflow: hidden!important; display: block!important; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none}
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block {width: 100%!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style type="text/css">.MJXp-script {font-size: .8em}
.MJXp-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXp-bold {font-weight: bold}
.MJXp-italic {font-style: italic}
.MJXp-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-largeop {font-size: 150%}
.MJXp-largeop.MJXp-int {vertical-align: -.2em}
.MJXp-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXp-display {display: block; text-align: center; margin: 1em 0}
.MJXp-math span {display: inline-block}
.MJXp-box {display: block!important; text-align: center}
.MJXp-box:after {content: " "}
.MJXp-rule {display: block!important; margin-top: .1em}
.MJXp-char {display: block!important}
.MJXp-mo {margin: 0 .15em}
.MJXp-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXp-denom {display: inline-table!important; width: 100%}
.MJXp-denom > * {display: table-row!important}
.MJXp-surd {vertical-align: top}
.MJXp-surd > * {display: block!important}
.MJXp-script-box > *  {display: table!important; height: 50%}
.MJXp-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXp-script-box > *:last-child > * {vertical-align: bottom}
.MJXp-script-box > * > * > * {display: block!important}
.MJXp-mphantom {visibility: hidden}
.MJXp-munderover {display: inline-table!important}
.MJXp-over {display: inline-block!important; text-align: center}
.MJXp-over > * {display: block!important}
.MJXp-munderover > * {display: table-row!important}
.MJXp-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXp-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXp-mtr {display: table-row!important}
.MJXp-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXp-mtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-mlabeledtr {display: table-row!important}
.MJXp-mlabeledtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mlabeledtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXp-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXp-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXp-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXp-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXp-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXp-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXp-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXp-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXp-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXp-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
.MathJax_PHTML .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style></head>
<body class="legacyNav" data-turbolinks="false"><div id="MathJax_Message" style="display: none;"></div>
    <main>
        






    <div class="site-layout">
            <div class="site-layout__header">
                <div data-component-name="SiteHeaderContainer" style="display: flex; flex-direction: column; flex: 1 0 auto;"><div style="--mdc-theme-on-primary:#fff; --mdc-theme-on-surface:rgba(0, 0, 0, 0.87); --mdc-theme-text-primary-on-background:rgba(0, 0, 0, 0.87); --mdc-theme-text-secondary-on-background:rgba(0, 0, 0, 0.54); --mdc-theme-text-hint-on-background:rgba(0, 0, 0, 0.38); --mdc-theme-text-disabled-on-background:rgba(0, 0, 0, 0.38); --mdc-theme-text-icon-on-background:rgba(0, 0, 0, 0.38); --mdc-theme-primary:#20BEFF; --mdc-theme-error:#F58B8A; --mdc-theme-background:#F8F8F8; --mdc-theme-surface:#F8F8F8; --mdc-theme-primary-bg:#20BEFF; --mdc-theme-secondary-bg:#919294;"><div class="site-header-react"><div class="site-header-react__wrapper-cookies-header"><div class="site-header-react__container"><div class="site-header-react__content"><div class="site-header-react__logo"><a href="https://www.kaggle.com/"><img alt="Kaggle" src="./E-Commerce predicting customer lifetime value _ Kaggle_files/site-logo.png"></a></div><div class="SiteHeader_MercatInputPlaceholderWrapper-sc-1gfkcpc bvojLV"><div class="sc-dLHtUl hGSvzF"><div class="sc-dmXgXv jpLxZn"><i sizevalue="24px" class="rmwc-icon google-material-icons sc-hSdWYo hTAUcu sc-cqOjgt fCqccO">search</i><div class="sc-jTdKgc kbeoaX">Search</div></div></div></div><nav class="site-header-react__nav"><ol class="SiteHeader_SiteHeaderNavList-sc-fru52l btMbfT"><li class="site-header-react__nav-item site-header-react__nav-item--first"><a id="site-header-competitions__a" href="https://www.kaggle.com/competitions">Competitions</a></li><li class="site-header-react__nav-item "><a id="site-header-datasets__a" href="https://www.kaggle.com/datasets">Datasets</a></li><li class="site-header-react__nav-item "><a id="site-header-notebooks__a" href="https://www.kaggle.com/notebooks">Notebooks</a></li><li class="site-header-react__nav-item "><a id="site-header-discussion__a" href="https://www.kaggle.com/discussion">Discussion</a></li><li class="site-header-react__nav-item "><a id="site-header-courses__a" href="https://www.kaggle.com/learn">Courses</a></li><li class="site-header-react__nav-item"><a class="site-header-react__extra-link" title="More"><svg class="site-header-react__nav-ellipsis" width="18px" height="4px" viewBox="0 0 18 4"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><path d="M16,4 C14.8954305,4 14,3.1045695 14,2 C14,0.8954305 14.8954305,0 16,0 C17.1045695,0 18,0.8954305 18,2 C18,3.1045695 17.1045695,4 16,4 Z M9,4 C7.8954305,4 7,3.1045695 7,2 C7,0.8954305 7.8954305,0 9,0 C10.1045695,0 11,0.8954305 11,2 C11,3.1045695 10.1045695,4 9,4 Z M2,4 C0.8954305,4 0,3.1045695 0,2 C0,0.8954305 0.8954305,0 2,0 C3.1045695,0 4,0.8954305 4,2 C4,3.1045695 3.1045695,4 2,4 Z" fill="#FFFFFF"></path></g></svg></a></li></ol></nav><div class="NotificationContainer_NotificationContainerWrapper-sc-bb4fan jzSiza"><span class="tooltip-container NotificationContainer_NotificationTooltipWrapper-sc-1jdjwer bEGeae" data-tooltip="Notifications"><div class="NotificationIcon_NotificationIconWrapper-sc-3rbk7d dBubSX"><div class="NotificationIcon_NotificationIconIcon-sc-wpy2fb bdBygo"><span name="bell" class="fa fa-bell"></span></div></div></span><div></div></div><div class="site-header-react__user"><span class="tooltip-container" data-tooltip="Your profile"><div class="site-header-react__user--logged-in"><ul><li class="site-header-react__user-avatar"><img src="./E-Commerce predicting customer lifetime value _ Kaggle_files/default-thumb.png" alt="Alireza Alizadegan"></li></ul></div></span></div></div></div></div><div data-testid="searchContainer" class="sc-fZwumE ioIzze"><div class="sc-iSDuPN itMbCJ"><div class="sc-ipZHIp eMCGuJ"><div class="sc-ebFjAB eHHSfJ"><button aria-hidden="true" color="#20BEFF" sizevalue="24px" role="button" tabindex="0" data-mdc-ripple-is-unbounded="true" class="rmwc-icon google-material-icons sc-iqzUVk bGvscQ sc-iGrrsa cuuLbW mdc-ripple-upgraded--unbounded mdc-ripple-upgraded sc-iqzUVk bGvscQ sc-iGrrsa cuuLbW mdc-icon-button" style="--mdc-ripple-fg-size:0px; --mdc-ripple-fg-scale:NaN; --mdc-ripple-left:0px; --mdc-ripple-top:0px;">arrow_back</button><form data-testid="searchInputBarFormElement" class="sc-dEoRIm fVXeuO"><input data-testid="searchInputBarInputElement" class="sc-jtggT jMuXyB searchTarget" type="text" size="1" value=""></form></div><div class="sc-jKVCRD jteWAb"><button aria-hidden="true" color="#20BEFF" sizevalue="24px" role="button" tabindex="0" data-mdc-ripple-is-unbounded="true" class="rmwc-icon google-material-icons sc-iqzUVk bGvscQ sc-iGrrsa sc-bmyXtO heGEpU mdc-ripple-upgraded--unbounded mdc-ripple-upgraded sc-iqzUVk bGvscQ sc-iGrrsa sc-bmyXtO heGEpU mdc-icon-button" style="--mdc-ripple-fg-size:0px; --mdc-ripple-fg-scale:NaN; --mdc-ripple-left:0px; --mdc-ripple-top:0px;">search</button><button aria-hidden="true" color="#20BEFF" sizevalue="24px" role="button" tabindex="0" data-mdc-ripple-is-unbounded="true" class="rmwc-icon google-material-icons sc-iqzUVk bGvscQ sc-iGrrsa cuuLbW mdc-ripple-upgraded--unbounded mdc-ripple-upgraded sc-iqzUVk bGvscQ sc-iGrrsa cuuLbW mdc-icon-button" style="--mdc-ripple-fg-size:0px; --mdc-ripple-fg-scale:NaN; --mdc-ripple-left:0px; --mdc-ripple-top:0px;">close</button></div></div></div><div class="sc-fQejPQ eqhinv"><div class="sc-iGPElx kMkOgX"><div data-testid="searchInitialPage" class="sc-ipXKqB lemvWR"><div class="sc-fjmCvl jmdDbZ"><div tabindex="0" class="sc-btzYZH dcBPpq sc-TFwJa gkDhAQ searchTarget mdc-ripple-upgraded sc-btzYZH dcBPpq sc-TFwJa gkDhAQ searchTarget mdc-list-item"><div class="sc-bHwgHz imqpyW"><i sizevalue="24px" class="rmwc-icon google-material-icons sc-hSdWYo hTAUcu sc-krDsej hOVzdU">history</i></div><div class="sc-eMigcr ixwrgi"><h6 class="sc-jTzLTM sc-itybZL LeRXo">ecommerce</h6><div class="sc-cqCuEk bwwiWv"></div></div></div></div><div class="sc-fjmCvl jmdDbZ"><div tabindex="0" class="sc-btzYZH dcBPpq sc-TFwJa gkDhAQ searchTarget mdc-ripple-upgraded sc-btzYZH dcBPpq sc-TFwJa gkDhAQ searchTarget mdc-list-item"><div class="sc-bHwgHz imqpyW"><i sizevalue="24px" class="rmwc-icon google-material-icons sc-hSdWYo hTAUcu sc-krDsej hOVzdU">history</i></div><div class="sc-eMigcr ixwrgi"><h6 class="sc-jTzLTM sc-itybZL LeRXo">starbucks</h6><div class="sc-cqCuEk bwwiWv"></div></div></div></div><div class="sc-fjmCvl jmdDbZ"><div tabindex="0" class="sc-btzYZH dcBPpq sc-TFwJa gkDhAQ searchTarget mdc-ripple-upgraded sc-btzYZH dcBPpq sc-TFwJa gkDhAQ searchTarget mdc-list-item"><div class="sc-bHwgHz imqpyW"><i sizevalue="24px" class="rmwc-icon google-material-icons sc-hSdWYo hTAUcu sc-krDsej hOVzdU">history</i></div><div class="sc-eMigcr ixwrgi"><h6 class="sc-jTzLTM sc-itybZL LeRXo">bixi</h6><div class="sc-cqCuEk bwwiWv"></div></div></div></div><div class="sc-kLIISr bYcVtm"><p class="sc-kgoBCf sc-hmXxxW cpbfNv">Trending Searches</p><div class="sc-fjmCvl jmdDbZ"><div tabindex="0" class="sc-btzYZH dcBPpq sc-TFwJa gkDhAQ searchTarget mdc-ripple-upgraded sc-btzYZH dcBPpq sc-TFwJa gkDhAQ searchTarget mdc-list-item"><div class="sc-bHwgHz imqpyW"><i sizevalue="24px" class="rmwc-icon google-material-icons sc-hSdWYo hTAUcu sc-krDsej hOVzdU">trending_up</i></div><div class="sc-eMigcr ixwrgi"><h6 class="sc-jTzLTM sc-itybZL LeRXo">wuhan</h6></div></div></div><div class="sc-fjmCvl jmdDbZ"><div tabindex="0" class="sc-btzYZH dcBPpq sc-TFwJa gkDhAQ searchTarget mdc-ripple-upgraded sc-btzYZH dcBPpq sc-TFwJa gkDhAQ searchTarget mdc-list-item"><div class="sc-bHwgHz imqpyW"><i sizevalue="24px" class="rmwc-icon google-material-icons sc-hSdWYo hTAUcu sc-krDsej hOVzdU">trending_up</i></div><div class="sc-eMigcr ixwrgi"><h6 class="sc-jTzLTM sc-itybZL LeRXo">movies</h6></div></div></div><div class="sc-fjmCvl jmdDbZ"><div tabindex="0" class="sc-btzYZH dcBPpq sc-TFwJa gkDhAQ searchTarget mdc-ripple-upgraded sc-btzYZH dcBPpq sc-TFwJa gkDhAQ searchTarget mdc-list-item"><div class="sc-bHwgHz imqpyW"><i sizevalue="24px" class="rmwc-icon google-material-icons sc-hSdWYo hTAUcu sc-krDsej hOVzdU">trending_up</i></div><div class="sc-eMigcr ixwrgi"><h6 class="sc-jTzLTM sc-itybZL LeRXo">corona virus</h6></div></div></div></div><div class="sc-kLIISr bYcVtm"><p class="sc-kgoBCf sc-hmXxxW cpbfNv">Popular Tags</p><div class="sc-qrIAp ckljXe"><div class="sc-jVODtj cuWQvi mdc-chip-set"><button tabindex="0" customsize="medium" class="sc-hzDkRC fvrbvR sc-VJcYb kbnZMe mdc-ripple-upgraded sc-hzDkRC fvrbvR sc-VJcYb kbnZMe mdc-ripple-surface mdc-chip"><div class="mdc-chip__text"><div class="sc-kUaPvJ hZAfDL"><p class="sc-kgoBCf sc-giadOv ogCXC">starter code</p><span class="sc-kGXeez sc-fONwsr dJnDKI">37919</span></div></div></button><button tabindex="0" customsize="medium" class="sc-hzDkRC fvrbvR sc-VJcYb kbnZMe mdc-ripple-upgraded sc-hzDkRC fvrbvR sc-VJcYb kbnZMe mdc-ripple-surface mdc-chip"><div class="mdc-chip__text"><div class="sc-kUaPvJ hZAfDL"><p class="sc-kgoBCf sc-giadOv ogCXC">beginner</p><span class="sc-kGXeez sc-fONwsr dJnDKI">15062</span></div></div></button><button tabindex="0" customsize="medium" class="sc-hzDkRC fvrbvR sc-VJcYb kbnZMe mdc-ripple-upgraded sc-hzDkRC fvrbvR sc-VJcYb kbnZMe mdc-ripple-surface mdc-chip"><div class="mdc-chip__text"><div class="sc-kUaPvJ hZAfDL"><p class="sc-kgoBCf sc-giadOv ogCXC">data visualization</p><span class="sc-kGXeez sc-fONwsr dJnDKI">9152</span></div></div></button><button tabindex="0" customsize="medium" class="sc-hzDkRC fvrbvR sc-VJcYb kbnZMe mdc-ripple-upgraded sc-hzDkRC fvrbvR sc-VJcYb kbnZMe mdc-ripple-surface mdc-chip"><div class="mdc-chip__text"><div class="sc-kUaPvJ hZAfDL"><p class="sc-kgoBCf sc-giadOv ogCXC">deep learning</p><span class="sc-kGXeez sc-fONwsr dJnDKI">7376</span></div></div></button><button tabindex="0" customsize="medium" class="sc-hzDkRC fvrbvR sc-VJcYb kbnZMe mdc-ripple-upgraded sc-hzDkRC fvrbvR sc-VJcYb kbnZMe mdc-ripple-surface mdc-chip"><div class="mdc-chip__text"><div class="sc-kUaPvJ hZAfDL"><p class="sc-kgoBCf sc-giadOv ogCXC">eda</p><span class="sc-kGXeez sc-fONwsr dJnDKI">5495</span></div></div></button><button tabindex="0" customsize="medium" class="sc-hzDkRC fvrbvR sc-VJcYb kbnZMe mdc-ripple-upgraded sc-hzDkRC fvrbvR sc-VJcYb kbnZMe mdc-ripple-surface mdc-chip"><div class="mdc-chip__text"><div class="sc-kUaPvJ hZAfDL"><p class="sc-kgoBCf sc-giadOv ogCXC">business</p><span class="sc-kGXeez sc-fONwsr dJnDKI">5461</span></div></div></button><button tabindex="0" customsize="medium" class="sc-hzDkRC fvrbvR sc-VJcYb kbnZMe mdc-ripple-upgraded sc-hzDkRC fvrbvR sc-VJcYb kbnZMe mdc-ripple-surface mdc-chip"><div class="mdc-chip__text"><div class="sc-kUaPvJ hZAfDL"><p class="sc-kgoBCf sc-giadOv ogCXC">classification</p><span class="sc-kGXeez sc-fONwsr dJnDKI">4977</span></div></div></button><button tabindex="0" customsize="medium" class="sc-hzDkRC fvrbvR sc-VJcYb kbnZMe mdc-ripple-upgraded sc-hzDkRC fvrbvR sc-VJcYb kbnZMe mdc-ripple-surface mdc-chip"><div class="mdc-chip__text"><div class="sc-kUaPvJ hZAfDL"><p class="sc-kgoBCf sc-giadOv ogCXC">tutorial</p><span class="sc-kGXeez sc-fONwsr dJnDKI">4714</span></div></div></button><button tabindex="0" customsize="medium" class="sc-hzDkRC fvrbvR sc-VJcYb kbnZMe mdc-ripple-upgraded sc-hzDkRC fvrbvR sc-VJcYb kbnZMe mdc-ripple-surface mdc-chip"><div class="mdc-chip__text"><div class="sc-kUaPvJ hZAfDL"><p class="sc-kgoBCf sc-giadOv ogCXC">utility script</p><span class="sc-kGXeez sc-fONwsr dJnDKI">4225</span></div></div></button><button tabindex="0" customsize="medium" class="sc-hzDkRC fvrbvR sc-VJcYb kbnZMe mdc-ripple-upgraded sc-hzDkRC fvrbvR sc-VJcYb kbnZMe mdc-ripple-surface mdc-chip"><div class="mdc-chip__text"><div class="sc-kUaPvJ hZAfDL"><p class="sc-kgoBCf sc-giadOv ogCXC">computing</p><span class="sc-kGXeez sc-fONwsr dJnDKI">3394</span></div></div></button><button tabindex="0" customsize="medium" class="sc-hzDkRC fvrbvR sc-VJcYb kbnZMe mdc-ripple-upgraded sc-hzDkRC fvrbvR sc-VJcYb kbnZMe mdc-ripple-surface mdc-chip"><div class="mdc-chip__text"><div class="sc-kUaPvJ hZAfDL"><p class="sc-kgoBCf sc-giadOv ogCXC">feature engineering</p><span class="sc-kGXeez sc-fONwsr dJnDKI">2962</span></div></div></button><button tabindex="0" customsize="medium" class="sc-hzDkRC fvrbvR sc-VJcYb kbnZMe mdc-ripple-upgraded sc-hzDkRC fvrbvR sc-VJcYb kbnZMe mdc-ripple-surface mdc-chip"><div class="mdc-chip__text"><div class="sc-kUaPvJ hZAfDL"><p class="sc-kgoBCf sc-giadOv ogCXC">natural and physical sciences</p><span class="sc-kGXeez sc-fONwsr dJnDKI">2933</span></div></div></button><button tabindex="0" customsize="medium" class="sc-hzDkRC fvrbvR sc-VJcYb kbnZMe mdc-ripple-upgraded sc-hzDkRC fvrbvR sc-VJcYb kbnZMe mdc-ripple-surface mdc-chip"><div class="mdc-chip__text"><div class="sc-kUaPvJ hZAfDL"><p class="sc-kgoBCf sc-giadOv ogCXC">data cleaning</p><span class="sc-kGXeez sc-fONwsr dJnDKI">2839</span></div></div></button><button tabindex="0" customsize="medium" class="sc-hzDkRC fvrbvR sc-VJcYb kbnZMe mdc-ripple-upgraded sc-hzDkRC fvrbvR sc-VJcYb kbnZMe mdc-ripple-surface mdc-chip"><div class="mdc-chip__text"><div class="sc-kUaPvJ hZAfDL"><p class="sc-kgoBCf sc-giadOv ogCXC">arts and entertainment</p><span class="sc-kGXeez sc-fONwsr dJnDKI">2823</span></div></div></button><button tabindex="0" customsize="medium" class="sc-hzDkRC fvrbvR sc-VJcYb kbnZMe mdc-ripple-upgraded sc-hzDkRC fvrbvR sc-VJcYb kbnZMe mdc-ripple-surface mdc-chip"><div class="mdc-chip__text"><div class="sc-kUaPvJ hZAfDL"><p class="sc-kgoBCf sc-giadOv ogCXC">computer science</p><span class="sc-kGXeez sc-fONwsr dJnDKI">2350</span></div></div></button><button tabindex="0" customsize="medium" class="sc-hzDkRC fvrbvR sc-VJcYb kbnZMe mdc-ripple-upgraded sc-hzDkRC fvrbvR sc-VJcYb kbnZMe mdc-ripple-surface mdc-chip"><div class="mdc-chip__text"><div class="sc-kUaPvJ hZAfDL"><p class="sc-kgoBCf sc-giadOv ogCXC">statistics</p><span class="sc-kGXeez sc-fONwsr dJnDKI">2181</span></div></div></button><button tabindex="0" customsize="medium" class="sc-hzDkRC fvrbvR sc-VJcYb kbnZMe mdc-ripple-upgraded sc-hzDkRC fvrbvR sc-VJcYb kbnZMe mdc-ripple-surface mdc-chip"><div class="mdc-chip__text"><div class="sc-kUaPvJ hZAfDL"><p class="sc-kgoBCf sc-giadOv ogCXC">internet</p><span class="sc-kGXeez sc-fONwsr dJnDKI">1848</span></div></div></button><button tabindex="0" customsize="medium" class="sc-hzDkRC fvrbvR sc-VJcYb kbnZMe mdc-ripple-upgraded sc-hzDkRC fvrbvR sc-VJcYb kbnZMe mdc-ripple-surface mdc-chip"><div class="mdc-chip__text"><div class="sc-kUaPvJ hZAfDL"><p class="sc-kgoBCf sc-giadOv ogCXC">reference</p><span class="sc-kGXeez sc-fONwsr dJnDKI">1758</span></div></div></button><button tabindex="0" customsize="medium" class="sc-hzDkRC fvrbvR sc-VJcYb kbnZMe mdc-ripple-upgraded sc-hzDkRC fvrbvR sc-VJcYb kbnZMe mdc-ripple-surface mdc-chip"><div class="mdc-chip__text"><div class="sc-kUaPvJ hZAfDL"><p class="sc-kgoBCf sc-giadOv ogCXC">education</p><span class="sc-kGXeez sc-fONwsr dJnDKI">1543</span></div></div></button><button tabindex="0" customsize="medium" class="sc-hzDkRC fvrbvR sc-VJcYb kbnZMe mdc-ripple-upgraded sc-hzDkRC fvrbvR sc-VJcYb kbnZMe mdc-ripple-surface mdc-chip"><div class="mdc-chip__text"><div class="sc-kUaPvJ hZAfDL"><p class="sc-kgoBCf sc-giadOv ogCXC">dailychallenge</p><span class="sc-kGXeez sc-fONwsr dJnDKI">1388</span></div></div></button></div></div></div></div></div></div></div></div></div></div><script nonce="">var Kaggle=window.Kaggle||{};Kaggle.State=Kaggle.State||[];Kaggle.State.push({});performance && performance.mark && performance.mark("SiteHeaderContainer.componentCouldBootstrap");</script>
            </div>

        <div class="site-layout__main-content">
            



<div data-component-name="KernelViewer" style="display: flex; flex-direction: column; flex: 1 0 auto;"><div style="--mdc-theme-on-primary:#fff; --mdc-theme-on-surface:rgba(0, 0, 0, 0.87); --mdc-theme-text-primary-on-background:rgba(0, 0, 0, 0.87); --mdc-theme-text-secondary-on-background:rgba(0, 0, 0, 0.54); --mdc-theme-text-hint-on-background:rgba(0, 0, 0, 0.38); --mdc-theme-text-disabled-on-background:rgba(0, 0, 0, 0.38); --mdc-theme-text-icon-on-background:rgba(0, 0, 0, 0.38); --mdc-theme-primary:#20BEFF; --mdc-theme-error:#F58B8A; --mdc-theme-background:#F8F8F8; --mdc-theme-surface:#F8F8F8; --mdc-theme-primary-bg:#20BEFF; --mdc-theme-secondary-bg:#919294;"><div id="kernel-container" class="KernelViewer_KernelContainer-sc-pqp17m geIfSj"><div id="kernel-header-wrapper" class="KernelViewer_HeaderWrapper-sc-8tipmk bHUTQM" style="top: 0px;"><div class="KernelViewerContext_ViewerHeader-sc-rb9dne gsvLRR"><span class="KernelViewerContext_PrimaryInfoWrapper-sc-ia2f3h iJGizJ"><span class="KernelViewerContext_AuthorThumbnailWrapper-sc-16ybk5w gKyUfk"><span class="tooltip-container tooltip-container--left" data-tooltip="Anubhav Dhiman"><a class="avatar" href="https://www.kaggle.com/dhimananubhav" style="width: 37px;"><img class="avatar__thumbnail" src="./E-Commerce predicting customer lifetime value _ Kaggle_files/685355-gr.jpg" alt="Anubhav Dhiman" width="37" height="37" style="border-radius: 3.7px;"><img class="avatar__tier" src="./E-Commerce predicting customer lifetime value _ Kaggle_files/avatier-expert@2x.png" alt="expert tier" width="37" style="margin-top: 1.85px;"></a></span><span class="KernelViewerContext_TruncatedCollaboratorsWrapper-sc-t3tbmb gucpcS"><span><span class="TruncatedCollaborators_CollaboratorThumbnailWrapper-sc-soe92h eyJHdD"></span></span></span></span><span class="KernelViewerContext_TitleBlock-sc-jekzgk iwNYec"><img src="./E-Commerce predicting customer lifetime value _ Kaggle_files/bronzel@1x.png" alt="bronze medal" class="KernelViewerContext_KernelMedal-sc-1dzga2t fjtRyK"><a class="KernelViewerContext_KernelTitle-sc-jsmupn dioqyE">E-Commerce predicting customer lifetime value</a><br><span class="KernelViewerContext_KernelSubtitle-sc-1joh4f8 VvzXw"><span class="KernelViewerContext_KernelTypeInfo-sc-1l6fza6 cCZXYa">Python notebook using data from</span><a href="https://www.kaggle.com/olistbr/brazilian-ecommerce" class="KernelViewerContext_DataSourceUrl-sc-1dm3ij9 jFvyqr"> Brazilian E-Commerce Public Dataset by Olist</a><span> · <span>10,603</span> views</span><span> · <span title="Fri Oct 25 2019 14:03:25 GMT-0700 (Pacific Daylight Time)">3mo ago</span></span><span class="KernelViewerContext_CategoriesWrapper-sc-8yrjj dLfERf"><span></span></span></span></span></span><span class="HeaderOptionsContext_CommunityWrapper-sc-1xsfcpi kWGhbv"><span class="KernelVoteButton_VoteButtonWrapper-sc-2bmt8m grkOhB"><div class="vote-button__container "><div class="vote-button vote-button--compact vote-button--enabled"><div class="vote-button__button vote-button__button--up vb-upvote"><span class="fa fa-angle-up"></span></div><div class="vote-button__button vote-button__button--up vote-button__vote-count-container"><span class="vote-button__vote-count">31</span></div><div class="vote-button__button-placeholder"></div></div></div></span><div class="ForkButton_Wrapper-sc-1t7l405 cjbHxG"><span class="ForkButton_JoinedCopyAndEditContainer-sc-lcxjzz frwGeq fork-button"><a href="https://www.kaggle.com/kernels/fork/1949320" class="button__anchor-wrapper"><div class="button ForkButton_CreateCopyAndEditButton-sc-1dnwfvb bANhPZ"><span><span class="ForkButton_CopyAndEditTextContainer-sc-m90zur jPVKcN"><span class="ForkButton_CodeForkIcon-sc-5oak8 bDOIjy fa fa-code-fork"></span> Copy and Edit</span></span></div></a><a class="button__anchor-wrapper"><div class="button ForkButton_CreateCopyAndEditButton-sc-1dnwfvb ForkButton_CopyAndEditCountButton-sc-2wqg9l jBXMWu"><span><div>112</div></span></div></a></span></div><span class="HeaderOptionsContext_InlineDropdown-sc-183b1ux eVsYcS"><div class="NewsfeedDropdown_DropdownContainer-sc-1t1dgyy hYJeFY"><div class="NewsfeedDropdown_DropdownIconContainer-sc-vzs67v iCpUqc"><span name="ellipsis-h" class="fa fa-ellipsis-h"></span> </div></div></span></span></div><div class="sc-dDojKJ cYQbJa"></div></div><div class="KernelViewer_ViewerContent-sc-8uapew fGqQuV"><div class="kernel-viewer"><span class="KernelViewer_NavigationSidebarWrapper-sc-m3cp4m kvCEgv"><div class="KernelViewerContext_FullNavigationMenu-sc-1n0pzuj iNdcun"><span><div class="VersionsInfoBox_VersionTitle-sc-1a29ina ejMWrH">Version 7</div><div class="VersionsInfoBox_VersionTitle-sc-1a29ina VersionsInfoBox_VersionSubtitle-sc-so54uw eLUMyL"><span class="VersionsInfoBox_RecentCommitsIcon-sc-1gnl07a nEcTI fa fa-history"><span> <span>7 commits</span></span></span></div></span><div class="navbox__container"><div class="navbox__nav-wrapper"><nav class="navbox__nav"><a class="navbox__nav-item--selected" href="https://www.kaggle.com/dhimananubhav/e-commerce-predicting-customer-lifetime-value/notebook" title="Notebook">Notebook</a><div class="navbox__page"><span class="KernelViewerContext_ContentsMenu-sc-8en2wv huDVCR"><div class="navbox__container"><div class="navbox__nav-wrapper"><nav class="navbox__nav"><a class="navbox__nav-item--selected-with-bar" href="https://www.kaggle.com/dhimananubhav/e-commerce-predicting-customer-lifetime-value#Predicting-customer-lifetime-value-and-future-purchases" title="">Predicting customer lifetime value and future purchases</a><div class="navbox__page"></div></nav></div></div></span></div><a class="navbox__nav-item" href="https://www.kaggle.com/dhimananubhav/e-commerce-predicting-customer-lifetime-value/data" title="Data">Data</a><a class="navbox__nav-item" href="https://www.kaggle.com/dhimananubhav/e-commerce-predicting-customer-lifetime-value/comments" title="Comments">Comments</a></nav></div></div></div></span><div class="kernel-viewer__container"><div class="kernel-viewer__pane-container" id="kernel-viewer__pane-container"><div class="KernelViewer_SubmissionWrapper-sc-13mikru bHRCEj"></div><div id="notebook"><div><div class="kernel-notebook-pane" style="display: block;"><div class="content-box"><div><div class="content-box__title-bar"><div class="ContentBox_Title-sc-6fbrxj bkvjMN" style="line-height: 46px;">Notebook</div></div></div><div class="content-box__content-section"><div class="kernel-notebook-pane__container"><iframe id="rendered-kernel-content" src="./E-Commerce predicting customer lifetime value _ Kaggle_files/__results__.html" scrolling="no" title="Main Kernel Content" style="height: 13400px; display: block;"></iframe><div class="kernel-notebook-pane__loading" style="display: none;"><div class="Spinner_SpinnerContainer-sc-fllvzl cBVAFE"><i class="fa fa-circle-o-notch fa-spin fa-2x"></i></div></div></div></div></div></div><div class="kernel-code-pane__subtitle" id="notebook-pane-license-info">This Notebook has been released under the <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0</a> open source license.</div><div class="upvote-suggestion upvote-suggestion__kernel"><div class="upvote-suggestion__text"><div class="upvote-suggestion__main-text">Did you find this Notebook useful?</div><div class="upvote-suggestion__sub-text">Show your appreciation with an upvote</div></div><div class="upvote-suggestion__button"><div class="vote-button__container "><div class="vote-button vote-button--enabled"><div class="vote-button__button vote-button__button--up vb-upvote"><span class="fa fa-caret-up"></span></div><div class="vote-button__button vote-button__button--up vote-button__vote-count-container"><span class="vote-button__vote-count">31</span></div><div class="vote-button__button-placeholder"></div></div></div></div><div class="upvote-suggestion__voters"><div class="upvote-suggestion__voter upvote-suggestion__voter-top"><span class="tooltip-container" data-tooltip="Regi" data-tooltip-size="small"><a href="https://www.kaggle.com/regivm" class="upvote-suggestion__voter-link"><img src="./E-Commerce predicting customer lifetime value _ Kaggle_files/26267-kg.png" alt="Regi" class="upvote-suggestion__voter-img"></a></span></div><div class="upvote-suggestion__voter upvote-suggestion__voter-top"><span class="tooltip-container" data-tooltip="rsong47" data-tooltip-size="small"><a href="https://www.kaggle.com/renjiesong" class="upvote-suggestion__voter-link"><img src="./E-Commerce predicting customer lifetime value _ Kaggle_files/116931-kg.jpg" alt="rsong47" class="upvote-suggestion__voter-img"></a></span></div><div class="upvote-suggestion__voter upvote-suggestion__voter-top"><span class="tooltip-container" data-tooltip="dhruv_agg" data-tooltip-size="small"><a href="https://www.kaggle.com/da9976" class="upvote-suggestion__voter-link"><img src="./E-Commerce predicting customer lifetime value _ Kaggle_files/default-thumb.png" alt="dhruv_agg" class="upvote-suggestion__voter-img"></a></span></div><div class="upvote-suggestion__voter upvote-suggestion__voter-more"><span class="tooltip-container" data-tooltip="SilasShederson" data-tooltip-size="small"><a href="https://www.kaggle.com/shederson" class="upvote-suggestion__voter-link"><img src="./E-Commerce predicting customer lifetime value _ Kaggle_files/740473-gp.jpg" alt="SilasShederson" class="upvote-suggestion__voter-img"></a></span></div><div class="upvote-suggestion__voter upvote-suggestion__voter-more"><span class="tooltip-container" data-tooltip="Marlesson" data-tooltip-size="small"><a href="https://www.kaggle.com/marlesson" class="upvote-suggestion__voter-link"><img src="./E-Commerce predicting customer lifetime value _ Kaggle_files/1068315-gr.jpg" alt="Marlesson" class="upvote-suggestion__voter-img"></a></span></div><div class="upvote-suggestion__voter upvote-suggestion__voter-more"><span class="tooltip-container" data-tooltip="Haoge" data-tooltip-size="small"><a href="https://www.kaggle.com/haogegogo" class="upvote-suggestion__voter-link"><img src="./E-Commerce predicting customer lifetime value _ Kaggle_files/1177633-kg.jpg" alt="Haoge" class="upvote-suggestion__voter-img"></a></span></div><div class="upvote-suggestion__voter upvote-suggestion__voter-more"><span class="tooltip-container" data-tooltip="NaaSalleh" data-tooltip-size="small"><a href="https://www.kaggle.com/naams91" class="upvote-suggestion__voter-link"><img src="./E-Commerce predicting customer lifetime value _ Kaggle_files/1312840-fb.jpg" alt="NaaSalleh" class="upvote-suggestion__voter-img"></a></span></div><div class="upvote-suggestion__voter upvote-suggestion__voter-more"><span class="tooltip-container" data-tooltip="Hans Peter Hagblom" data-tooltip-size="small"><a href="https://www.kaggle.com/hhagblom" class="upvote-suggestion__voter-link"><img src="./E-Commerce predicting customer lifetime value _ Kaggle_files/default-thumb.png" alt="Hans Peter Hagblom" class="upvote-suggestion__voter-img"></a></span></div><div class="upvote-suggestion__voter upvote-suggestion__voter-more"><span class="tooltip-container" data-tooltip="Tiago Oliveira" data-tooltip-size="small"><a href="https://www.kaggle.com/tiagoooliveira" class="upvote-suggestion__voter-link"><img src="./E-Commerce predicting customer lifetime value _ Kaggle_files/1359779-kg.png" alt="Tiago Oliveira" class="upvote-suggestion__voter-img"></a></span></div><div class="upvote-suggestion__voter upvote-suggestion__voter-more"><span class="tooltip-container" data-tooltip="Grecnik" data-tooltip-size="small"><a href="https://www.kaggle.com/nikitagrec" class="upvote-suggestion__voter-link"><img src="./E-Commerce predicting customer lifetime value _ Kaggle_files/1537849-kg.jpg" alt="Grecnik" class="upvote-suggestion__voter-img"></a></span></div><div class="upvote-suggestion__voter upvote-suggestion__voter-other"><span class="tooltip-container" data-tooltip="Andre Sionek" data-tooltip-size="small"><a href="https://www.kaggle.com/andresionek" class="upvote-suggestion__voter-link"><img src="./E-Commerce predicting customer lifetime value _ Kaggle_files/1549225-kg.jpg" alt="Andre Sionek" class="upvote-suggestion__voter-img"></a></span></div><div class="upvote-suggestion__voter upvote-suggestion__voter-other"><span class="tooltip-container" data-tooltip="pauroger" data-tooltip-size="small"><a href="https://www.kaggle.com/caixaofaixa" class="upvote-suggestion__voter-link"><img src="./E-Commerce predicting customer lifetime value _ Kaggle_files/default-thumb.png" alt="pauroger" class="upvote-suggestion__voter-img"></a></span></div><div class="upvote-suggestion__voter upvote-suggestion__voter-other"><span class="tooltip-container" data-tooltip="Aguiar" data-tooltip-size="small"><a href="https://www.kaggle.com/jsaguiar" class="upvote-suggestion__voter-link"><img src="./E-Commerce predicting customer lifetime value _ Kaggle_files/1566519-kg.jpg" alt="Aguiar" class="upvote-suggestion__voter-img"></a></span></div><div class="upvote-suggestion__voter upvote-suggestion__voter-other"><span class="tooltip-container" data-tooltip="NikoS" data-tooltip-size="small"><a href="https://www.kaggle.com/nikosmol" class="upvote-suggestion__voter-link"><img src="./E-Commerce predicting customer lifetime value _ Kaggle_files/default-thumb.png" alt="NikoS" class="upvote-suggestion__voter-img"></a></span></div><div class="upvote-suggestion__voter upvote-suggestion__voter-other"><span class="tooltip-container" data-tooltip="Petar" data-tooltip-size="small"><a href="https://www.kaggle.com/pz5545" class="upvote-suggestion__voter-link"><img src="./E-Commerce predicting customer lifetime value _ Kaggle_files/default-thumb.png" alt="Petar" class="upvote-suggestion__voter-img"></a></span></div></div></div></div></div><div id="data"><div class="DataExplorer_Container-sc-3uk7qa koHlGt"><div class="content-box"><div><div class="content-box__title-bar"><div class="ContentBox_Title-sc-6fbrxj bkvjMN" style="line-height: 46px;">Data</div><div class="content-box__right-side"><div class="DataExplorerOverview_TitleBarRight-sc-41u5ex fQnYEh"><div class="DataExplorerOverview_TitleBarItem-sc-7z0gmy jyhbDO"><span name="arrows-alt" class="DataExplorerPreview_TitleButtonInactive-sc-bzj2yc fpIVxw DataExplorerOverview_ModalButton-sc-16rlqid iDhVYC fa fa-arrows-alt"></span></div></div></div></div></div><div class="content-box__content-section"><div class="DataExplorerOverview_MainContentFlexHeight-sc-mttnn1 lnvRMd"><div class="DataExplorerOverview_Column-sc-1xt9894 DataExplorerOverview_ListColumn-sc-1njtlh9 yQpPz"><div class="DataExplorerList_ExplorerContainer-sc-1a88ctb cTVrfV"><div class="DataExplorerList_Header-sc-kx3nd2 iKHbXp data-explorer-list__header"><div class="DataExplorerList_HeaderTitle-sc-b3zndu eydspt">Data Sources</div><div class="DataExplorerList_HeaderRight-sc-17seut1 gAngP"></div></div><div class="DataExplorerList_Content-sc-t0yrr2 fXPaho"><div class="DataExplorerList_Entry-sc-1uffrzs khXEaG"><div class="DataExplorerList_UnselectedEntry-sc-1lv5br0 DataExplorerList_SelectedEntry-sc-tsuri7 cWTFrR"><div style="width: 16px; min-width: 16px; max-width: 16px;"></div><span name="chevron-down" class="DataExplorerList_CollapsedIcon-sc-1qjwt1i jUrboE fa fa-chevron-down"></span><span name="cube" class="DataExplorerList_TypeIcon-sc-mjsupj kUeJgO fa fa-cube"></span><div class="ToolTip_ToolTipContainer-sc-f0vhmk eHUYTV DataExplorerList_EntryNameToolTip2-sc-kc4oz cMQbPv"><div data-tip="true" data-for="tooltip_0" class="DataExplorerList_EntryName-sc-12cja4h eKEqwz" currentitem="false">Brazilian E-Commerce Public Dataset by Olist</div><div class="__react_component_tooltip place-top type-dark " id="tooltip_0" data-id="tooltip"><div class="ToolTip_ToolTipView-sc-1ci7zcv johoye"><span>Brazilian E-Commerce Public Dataset by Olist</span></div></div></div><div class="DataExplorerList_EntryInfoSpacer-sc-6qxfsx Hmlgy"></div></div><div class="DataExplorerList_EntryChildren-sc-1x9zgty fGsVOx"><div class="DataExplorerList_Entry-sc-1uffrzs khXEaG"><div class="DataExplorerList_UnselectedEntry-sc-1lv5br0 bgskLU"><div style="width: 32px; min-width: 32px; max-width: 32px;"></div><span name="chevron-right" class="DataExplorerList_CollapsedIcon-sc-1qjwt1i DataExplorerList_DisabledCollapsedIcon-sc-1qkqjxo fZbCWh fa fa-chevron-right"></span><span name="table" class="DataExplorerList_TypeIcon-sc-mjsupj kUeJgO fa fa-table"></span><div class="ToolTip_ToolTipContainer-sc-f0vhmk eHUYTV DataExplorerList_EntryNameToolTip2-sc-kc4oz cMQbPv"><div data-tip="true" data-for="tooltip_1" class="DataExplorerList_EntryName-sc-12cja4h eKEqwz" currentitem="false">olist_customers_dataset.csv</div><div class="__react_component_tooltip place-top type-dark " id="tooltip_1" data-id="tooltip"><div class="ToolTip_ToolTipView-sc-1ci7zcv johoye"><span>olist_customers_dataset.csv</span></div></div></div><div class="DataExplorerList_EntryInfo-sc-lll5vk gqOAgi">5 columns</div></div><a href="https://www.kaggle.com/olistbr/brazilian-ecommerce/download/zpEz6NjsJaanrMn7dErZ%2Fversions%2FRBg5GiJhaRvXAVeBUO9o%2Ffiles%2Folist_customers_dataset.csv?datasetVersionNumber=7" class="DataExplorerList_EntryAction-sc-1hkyq01 kJGSCc"><span name="download" class="DataExplorerList_EntryActionIconBackground-sc-aljf47 gfXnRe fa fa-download"></span></a></div><div class="DataExplorerList_Entry-sc-1uffrzs khXEaG"><div class="DataExplorerList_UnselectedEntry-sc-1lv5br0 bgskLU"><div style="width: 32px; min-width: 32px; max-width: 32px;"></div><span name="chevron-right" class="DataExplorerList_CollapsedIcon-sc-1qjwt1i DataExplorerList_DisabledCollapsedIcon-sc-1qkqjxo fZbCWh fa fa-chevron-right"></span><span name="table" class="DataExplorerList_TypeIcon-sc-mjsupj kUeJgO fa fa-table"></span><div class="ToolTip_ToolTipContainer-sc-f0vhmk eHUYTV DataExplorerList_EntryNameToolTip2-sc-kc4oz cMQbPv"><div data-tip="true" data-for="tooltip_2" class="DataExplorerList_EntryName-sc-12cja4h eKEqwz" currentitem="false">olist_geolocation_dataset.csv</div><div class="__react_component_tooltip place-top type-dark " id="tooltip_2" data-id="tooltip"><div class="ToolTip_ToolTipView-sc-1ci7zcv johoye"><span>olist_geolocation_dataset.csv</span></div></div></div><div class="DataExplorerList_EntryInfo-sc-lll5vk gqOAgi">5 columns</div></div><a href="https://www.kaggle.com/olistbr/brazilian-ecommerce/download/zpEz6NjsJaanrMn7dErZ%2Fversions%2FRBg5GiJhaRvXAVeBUO9o%2Ffiles%2Folist_geolocation_dataset.csv?datasetVersionNumber=7" class="DataExplorerList_EntryAction-sc-1hkyq01 kJGSCc"><span name="download" class="DataExplorerList_EntryActionIconBackground-sc-aljf47 gfXnRe fa fa-download"></span></a></div><div class="DataExplorerList_Entry-sc-1uffrzs khXEaG"><div class="DataExplorerList_UnselectedEntry-sc-1lv5br0 bgskLU"><div style="width: 32px; min-width: 32px; max-width: 32px;"></div><span name="chevron-right" class="DataExplorerList_CollapsedIcon-sc-1qjwt1i DataExplorerList_DisabledCollapsedIcon-sc-1qkqjxo fZbCWh fa fa-chevron-right"></span><span name="table" class="DataExplorerList_TypeIcon-sc-mjsupj kUeJgO fa fa-table"></span><div class="ToolTip_ToolTipContainer-sc-f0vhmk eHUYTV DataExplorerList_EntryNameToolTip2-sc-kc4oz cMQbPv"><div data-tip="true" data-for="tooltip_3" class="DataExplorerList_EntryName-sc-12cja4h eKEqwz" currentitem="false">olist_order_items_dataset.csv</div><div class="__react_component_tooltip place-top type-dark " id="tooltip_3" data-id="tooltip"><div class="ToolTip_ToolTipView-sc-1ci7zcv johoye"><span>olist_order_items_dataset.csv</span></div></div></div><div class="DataExplorerList_EntryInfo-sc-lll5vk gqOAgi">7 columns</div></div><a href="https://www.kaggle.com/olistbr/brazilian-ecommerce/download/zpEz6NjsJaanrMn7dErZ%2Fversions%2FRBg5GiJhaRvXAVeBUO9o%2Ffiles%2Folist_order_items_dataset.csv?datasetVersionNumber=7" class="DataExplorerList_EntryAction-sc-1hkyq01 kJGSCc"><span name="download" class="DataExplorerList_EntryActionIconBackground-sc-aljf47 gfXnRe fa fa-download"></span></a></div><div class="DataExplorerList_Entry-sc-1uffrzs khXEaG"><div class="DataExplorerList_UnselectedEntry-sc-1lv5br0 bgskLU"><div style="width: 32px; min-width: 32px; max-width: 32px;"></div><span name="chevron-right" class="DataExplorerList_CollapsedIcon-sc-1qjwt1i DataExplorerList_DisabledCollapsedIcon-sc-1qkqjxo fZbCWh fa fa-chevron-right"></span><span name="table" class="DataExplorerList_TypeIcon-sc-mjsupj kUeJgO fa fa-table"></span><div class="ToolTip_ToolTipContainer-sc-f0vhmk eHUYTV DataExplorerList_EntryNameToolTip2-sc-kc4oz cMQbPv"><div data-tip="true" data-for="tooltip_4" class="DataExplorerList_EntryName-sc-12cja4h eKEqwz" currentitem="false">olist_order_payments_dataset.csv</div><div class="__react_component_tooltip place-top type-dark " id="tooltip_4" data-id="tooltip"><div class="ToolTip_ToolTipView-sc-1ci7zcv johoye"><span>olist_order_payments_dataset.csv</span></div></div></div><div class="DataExplorerList_EntryInfo-sc-lll5vk gqOAgi">5 columns</div></div><a href="https://www.kaggle.com/olistbr/brazilian-ecommerce/download/zpEz6NjsJaanrMn7dErZ%2Fversions%2FRBg5GiJhaRvXAVeBUO9o%2Ffiles%2Folist_order_payments_dataset.csv?datasetVersionNumber=7" class="DataExplorerList_EntryAction-sc-1hkyq01 kJGSCc"><span name="download" class="DataExplorerList_EntryActionIconBackground-sc-aljf47 gfXnRe fa fa-download"></span></a></div><div class="DataExplorerList_Entry-sc-1uffrzs khXEaG"><div class="DataExplorerList_UnselectedEntry-sc-1lv5br0 bgskLU"><div style="width: 32px; min-width: 32px; max-width: 32px;"></div><span name="chevron-right" class="DataExplorerList_CollapsedIcon-sc-1qjwt1i DataExplorerList_DisabledCollapsedIcon-sc-1qkqjxo fZbCWh fa fa-chevron-right"></span><span name="table" class="DataExplorerList_TypeIcon-sc-mjsupj kUeJgO fa fa-table"></span><div class="ToolTip_ToolTipContainer-sc-f0vhmk eHUYTV DataExplorerList_EntryNameToolTip2-sc-kc4oz cMQbPv"><div data-tip="true" data-for="tooltip_5" class="DataExplorerList_EntryName-sc-12cja4h eKEqwz" currentitem="false">olist_order_reviews_dataset.csv</div><div class="__react_component_tooltip place-top type-dark " id="tooltip_5" data-id="tooltip"><div class="ToolTip_ToolTipView-sc-1ci7zcv johoye"><span>olist_order_reviews_dataset.csv</span></div></div></div><div class="DataExplorerList_EntryInfo-sc-lll5vk gqOAgi">7 columns</div></div><a href="https://www.kaggle.com/olistbr/brazilian-ecommerce/download/zpEz6NjsJaanrMn7dErZ%2Fversions%2FRBg5GiJhaRvXAVeBUO9o%2Ffiles%2Folist_order_reviews_dataset.csv?datasetVersionNumber=7" class="DataExplorerList_EntryAction-sc-1hkyq01 kJGSCc"><span name="download" class="DataExplorerList_EntryActionIconBackground-sc-aljf47 gfXnRe fa fa-download"></span></a></div><div class="DataExplorerList_Entry-sc-1uffrzs khXEaG"><div class="DataExplorerList_UnselectedEntry-sc-1lv5br0 bgskLU"><div style="width: 32px; min-width: 32px; max-width: 32px;"></div><span name="chevron-right" class="DataExplorerList_CollapsedIcon-sc-1qjwt1i DataExplorerList_DisabledCollapsedIcon-sc-1qkqjxo fZbCWh fa fa-chevron-right"></span><span name="table" class="DataExplorerList_TypeIcon-sc-mjsupj kUeJgO fa fa-table"></span><div class="ToolTip_ToolTipContainer-sc-f0vhmk eHUYTV DataExplorerList_EntryNameToolTip2-sc-kc4oz cMQbPv"><div data-tip="true" data-for="tooltip_6" class="DataExplorerList_EntryName-sc-12cja4h eKEqwz" currentitem="false">olist_orders_dataset.csv</div><div class="__react_component_tooltip place-top type-dark " id="tooltip_6" data-id="tooltip"><div class="ToolTip_ToolTipView-sc-1ci7zcv johoye"><span>olist_orders_dataset.csv</span></div></div></div><div class="DataExplorerList_EntryInfo-sc-lll5vk gqOAgi">8 columns</div></div><a href="https://www.kaggle.com/olistbr/brazilian-ecommerce/download/zpEz6NjsJaanrMn7dErZ%2Fversions%2FRBg5GiJhaRvXAVeBUO9o%2Ffiles%2Folist_orders_dataset.csv?datasetVersionNumber=7" class="DataExplorerList_EntryAction-sc-1hkyq01 kJGSCc"><span name="download" class="DataExplorerList_EntryActionIconBackground-sc-aljf47 gfXnRe fa fa-download"></span></a></div><div class="DataExplorerList_Entry-sc-1uffrzs khXEaG"><div class="DataExplorerList_UnselectedEntry-sc-1lv5br0 bgskLU"><div style="width: 32px; min-width: 32px; max-width: 32px;"></div><span name="chevron-right" class="DataExplorerList_CollapsedIcon-sc-1qjwt1i DataExplorerList_DisabledCollapsedIcon-sc-1qkqjxo fZbCWh fa fa-chevron-right"></span><span name="table" class="DataExplorerList_TypeIcon-sc-mjsupj kUeJgO fa fa-table"></span><div class="ToolTip_ToolTipContainer-sc-f0vhmk eHUYTV DataExplorerList_EntryNameToolTip2-sc-kc4oz cMQbPv"><div data-tip="true" data-for="tooltip_7" class="DataExplorerList_EntryName-sc-12cja4h eKEqwz" currentitem="false">olist_products_dataset.csv</div><div class="__react_component_tooltip place-top type-dark " id="tooltip_7" data-id="tooltip"><div class="ToolTip_ToolTipView-sc-1ci7zcv johoye"><span>olist_products_dataset.csv</span></div></div></div><div class="DataExplorerList_EntryInfo-sc-lll5vk gqOAgi">9 columns</div></div><a href="https://www.kaggle.com/olistbr/brazilian-ecommerce/download/zpEz6NjsJaanrMn7dErZ%2Fversions%2FRBg5GiJhaRvXAVeBUO9o%2Ffiles%2Folist_products_dataset.csv?datasetVersionNumber=7" class="DataExplorerList_EntryAction-sc-1hkyq01 kJGSCc"><span name="download" class="DataExplorerList_EntryActionIconBackground-sc-aljf47 gfXnRe fa fa-download"></span></a></div><div class="DataExplorerList_Entry-sc-1uffrzs khXEaG"><div class="DataExplorerList_UnselectedEntry-sc-1lv5br0 bgskLU"><div style="width: 32px; min-width: 32px; max-width: 32px;"></div><span name="chevron-right" class="DataExplorerList_CollapsedIcon-sc-1qjwt1i DataExplorerList_DisabledCollapsedIcon-sc-1qkqjxo fZbCWh fa fa-chevron-right"></span><span name="table" class="DataExplorerList_TypeIcon-sc-mjsupj kUeJgO fa fa-table"></span><div class="ToolTip_ToolTipContainer-sc-f0vhmk eHUYTV DataExplorerList_EntryNameToolTip2-sc-kc4oz cMQbPv"><div data-tip="true" data-for="tooltip_8" class="DataExplorerList_EntryName-sc-12cja4h eKEqwz" currentitem="false">olist_sellers_dataset.csv</div><div class="__react_component_tooltip place-top type-dark " id="tooltip_8" data-id="tooltip"><div class="ToolTip_ToolTipView-sc-1ci7zcv johoye"><span>olist_sellers_dataset.csv</span></div></div></div><div class="DataExplorerList_EntryInfo-sc-lll5vk gqOAgi">4 columns</div></div><a href="https://www.kaggle.com/olistbr/brazilian-ecommerce/download/zpEz6NjsJaanrMn7dErZ%2Fversions%2FRBg5GiJhaRvXAVeBUO9o%2Ffiles%2Folist_sellers_dataset.csv?datasetVersionNumber=7" class="DataExplorerList_EntryAction-sc-1hkyq01 kJGSCc"><span name="download" class="DataExplorerList_EntryActionIconBackground-sc-aljf47 gfXnRe fa fa-download"></span></a></div><div class="DataExplorerList_Entry-sc-1uffrzs khXEaG"><div class="DataExplorerList_UnselectedEntry-sc-1lv5br0 bgskLU"><div style="width: 32px; min-width: 32px; max-width: 32px;"></div><span name="chevron-right" class="DataExplorerList_CollapsedIcon-sc-1qjwt1i DataExplorerList_DisabledCollapsedIcon-sc-1qkqjxo fZbCWh fa fa-chevron-right"></span><span name="table" class="DataExplorerList_TypeIcon-sc-mjsupj kUeJgO fa fa-table"></span><div class="ToolTip_ToolTipContainer-sc-f0vhmk eHUYTV DataExplorerList_EntryNameToolTip2-sc-kc4oz cMQbPv"><div data-tip="true" data-for="tooltip_9" class="DataExplorerList_EntryName-sc-12cja4h eKEqwz" currentitem="false">product_category_name_translation.csv</div><div class="__react_component_tooltip place-top type-dark " id="tooltip_9" data-id="tooltip"><div class="ToolTip_ToolTipView-sc-1ci7zcv johoye"><span>product_category_name_translation.csv</span></div></div></div><div class="DataExplorerList_EntryInfo-sc-lll5vk gqOAgi">2 columns</div></div><a href="https://www.kaggle.com/olistbr/brazilian-ecommerce/download/zpEz6NjsJaanrMn7dErZ%2Fversions%2FRBg5GiJhaRvXAVeBUO9o%2Ffiles%2Fproduct_category_name_translation.csv?datasetVersionNumber=7" class="DataExplorerList_EntryAction-sc-1hkyq01 kJGSCc"><span name="download" class="DataExplorerList_EntryActionIconBackground-sc-aljf47 gfXnRe fa fa-download"></span></a></div></div><a href="https://www.kaggle.com/olistbr/brazilian-ecommerce" target="_blank" class="DataExplorerList_EntryAction-sc-1hkyq01 kJGSCc"><span name="external-link" class="DataExplorerList_EntryActionIconBackground-sc-aljf47 gfXnRe fa fa-external-link"></span></a></div></div></div></div><div class="DataExplorerOverview_Column-sc-1xt9894 DataExplorerOverview_ObjectColumn-sc-v8kz4s ihDqUe"><div class="DataExplorerDescription_Container-sc-rtvgew bNXSrs"><div class="DataExplorerDescription_DatasourceHeader-sc-1jjl64y hYvtkD"><img src="./E-Commerce predicting customer lifetime value _ Kaggle_files/dataset-thumbnail.png" alt="Brazilian E-Commerce Public Dataset by Olist source image" class="DataExplorerDescription_DatasourceImage-sc-124hjw6 faQqwa"><div class="DataExplorerDescription_DatasourceDetails-sc-6z9az5 cgraVO"><div class="DataExplorerDescription_DatasourceName-sc-16246cx dGdqfj"><a href="https://www.kaggle.com/olistbr/brazilian-ecommerce" class="DataExplorerDescription_DatasourceLink-sc-40is1k jLoTGh">Brazilian E-Commerce Public Dataset by Olist</a></div><div class="DataExplorerDescription_DatasourceOverview-sc-64u3xx dthRbg">100,000 Orders with product, customer and reviews info</div><div class="DataExplorerDescription_DatasourceLastUpdated-sc-1bnzx7s htUSRH">Last Updated: <span title="Thu Nov 29 2018 04:22:57 GMT-0800 (Pacific Standard Time)">a year ago</span> (Version 7)</div></div></div><div class="DataExplorerDescription_Header-sc-9udzgu kagSZQ"><div class="DataExplorerDescription_HeaderTitle-sc-8yzcy8 hTEPjQ">About this Dataset</div><div class="DataExplorerDescription_HeaderRight-sc-m2iwyg fyjBEU"></div></div><div class="DataExplorerDescription_Content-sc-yp9anb iVzuqu"><div class="markdown-converter__text--rendered data-explorer-overview-description"><h1>Brazilian E-Commerce Public Dataset by Olist</h1>

<p>Welcome! This is a Brazilian ecommerce public dataset of orders made at <a href="http://www.olist.com/">Olist Store</a>. The dataset has information of 100k orders from 2016 to 2018 made at multiple marketplaces in Brazil. Its features allows viewing an order from multiple dimensions: from order status, price, payment and freight performance to customer location, product attributes and finally reviews written by customers. We also released a geolocation dataset that relates Brazilian zip codes to lat/lng coordinates.  </p>

<p>This is real commercial data, it has been anonymised, and references to the companies and partners in the review text have been replaced with the names of Game of Thrones great houses.</p>

<h2>Join it With the Marketing Funnel by Olist</h2>

<p>We have also released a <a href="https://www.kaggle.com/olistbr/marketing-funnel-olist/home">Marketing Funnel Dataset</a>. You may join both datasets and see an order from Marketing perspective now! </p>

<p><strong>Instructions on joining are available on this <a href="https://www.kaggle.com/andresionek/joining-marketing-funnel-with-brazilian-e-commerce">Kernel</a>.</strong></p>

<h2>Context</h2>

<p>This dataset was generously provided by Olist, the largest department store in Brazilian marketplaces. Olist connects small businesses from all over Brazil to channels without hassle and with a single contract. Those merchants are able to sell their products through the Olist Store and ship them directly to the customers using Olist logistics partners. See more on our website: <a href="https://www.olist.com/">www.olist.com</a></p>

<p>After a customer purchases the product from Olist Store a seller gets notified to fulfill that order. Once the customer receives the product, or the estimated delivery date is due, the customer gets a satisfaction survey by email where he can give a note for the purchase experience and write down some comments.</p>

<h3>Attention</h3>

<ol>
<li>An order might have multiple items.</li>
<li>Each item might be fulfilled by a distinct seller.</li>
<li>All text identifying stores and partners where replaced by the names of Game of Thrones great houses.</li>
</ol>

<h3>Example of a product listing on a marketplace</h3>

<p><img src="./E-Commerce predicting customer lifetime value _ Kaggle_files/JuJMns1.png" alt="Example of a product listing on a marketplace" title=""></p>

<h2>Data Schema</h2>

<p>The data is divided in multiple datasets for better understanding and organization. Please refer to the following data schema when working with it:
<img src="./E-Commerce predicting customer lifetime value _ Kaggle_files/HRhd2Y0.png" alt="Data Schema" title=""></p>

<h2>Classified Dataset</h2>

<p>We had previously released a classified dataset, but we removed it at <em>Version 6</em>. We intend to release it again as a new dataset with a new data schema. While we don't finish it, you may use the classified dataset available at the <em>Version 5</em> or previous.</p>

<h2>Inspiration</h2>

<p>Here are some inspiration for possible outcomes from this dataset.</p>

<p><strong>NLP:</strong> <br>
This dataset offers a supreme environment to parse out the reviews text through its multiple dimensions.</p>

<p><strong>Clustering:</strong><br> 
Some customers didn't write a review. But why are they happy or mad?</p>

<p><strong>Sales Prediction:</strong><br> 
With purchase date information you'll be able to predict future sales.</p>

<p><strong>Delivery Performance:</strong><br> 
You will also be able to work through delivery performance and find ways to optimize delivery times.</p>

<p><strong>Product Quality:</strong> <br>
Enjoy yourself discovering the products categories that are more prone to customer insatisfaction.</p>

<p><strong>Feature Engineering:</strong> <br>
Create features from this rich dataset or attach some external public information to it.</p>

<h2>Acknowledgements</h2>

<p>Thanks to Olist for releasing this dataset.</p></div></div></div></div></div></div></div></div></div><div id="output"></div><div id="comments"><div class="loading-text"><span class="fa fa-refresh fa-spin fa-fw"></span>Loading Comments...</div></div></div></div><div class="KernelViewer_EmptyColumn-sc-1ubq290 PBvJq"></div></div></div><span class="KernelViewer_NavigationFooterWrapper-sc-wrdi08 hOWXJV"><div class="StickyFooter-sc-17zvw1m fWlDXE"><nav class="NavBoxFooter_NavigationBar-sc-fpq4iw cMYHPq"><a href="https://www.kaggle.com/dhimananubhav/e-commerce-predicting-customer-lifetime-value/notebook" title="Notebook" class="NavBoxFooter_NavigationElement-sc-1a4m5yz NavBoxFooter_SelectedNavigationElement-sc-128c1nx cbSEkc"><div><span name="book" size="20" class="fa fa-book fa-stack-20x"></span></div><div class="NavBoxFooter_NavigationText-sc-p8ascv fWncVd">Notebook</div></a><a href="https://www.kaggle.com/dhimananubhav/e-commerce-predicting-customer-lifetime-value/data" title="Data" class="NavBoxFooter_NavigationElement-sc-1a4m5yz hmfEdB"><div><span name="table" size="20" class="fa fa-table fa-stack-20x"></span></div><div class="NavBoxFooter_NavigationText-sc-p8ascv fWncVd">Data</div></a><a href="https://www.kaggle.com/dhimananubhav/e-commerce-predicting-customer-lifetime-value/comments" title="Comments" class="NavBoxFooter_NavigationElement-sc-1a4m5yz hmfEdB"><div><span name="comment" size="20" class="fa fa-comment fa-stack-20x"></span></div><div class="NavBoxFooter_NavigationText-sc-p8ascv fWncVd">Comments</div></a></nav><div class="navbox__page"></div></div></span></div></div></div><script nonce="">var Kaggle=window.Kaggle||{};Kaggle.State=Kaggle.State||[];Kaggle.State.push({"kernel":{"id":1949320,"title":"E-Commerce predicting customer lifetime value","forkParent":null,"currentRunId":22553650,"mostRecentRunId":22553650,"url":"/dhimananubhav/e-commerce-predicting-customer-lifetime-value","tags":[],"commentCount":0,"upvoteCount":31,"viewCount":10603,"forkCount":112,"bestPublicScore":null,"author":{"id":685355,"displayName":"Anubhav Dhiman","email":null,"editedEmail":null,"editedEmailCode":null,"userName":"dhimananubhav","thumbnailUrl":"https://storage.googleapis.com/kaggle-avatars/thumbnails/685355-gr.jpg","profileUrl":"/dhimananubhav","registerDate":"0001-01-01T00:00:00Z","lastVisitDate":"0001-01-01T00:00:00Z","statusId":0,"performanceTier":2,"userRoles":null,"userLogins":null,"groupIds":null,"duplicateUsers":null,"hasPhoneVerifications":false,"failedNerdchas":0,"hasPendingNerdcha":false,"deleteRequests":null,"userAttributes":null,"isAdmin":false,"isTvc":false,"isKaggleBot":false,"isAdminOrTvc":false,"isAnonymous":false,"canAct":false,"canBeSeen":false,"thumbnailName":null,"isPhoneVerified":false},"isPrivate":false,"updatedTime":"2019-10-25T21:03:25.59Z","selfLink":"/kernels/1949320","pinnedDockerImageVersionId":13461,"dockerImagePinningType":"original","originalDockerImageId":13461,"isLanguageTemplate":false,"medal":"bronze","topicId":70260,"readGroupId":null,"writeGroupId":null,"slug":"e-commerce-predicting-customer-lifetime-value"},"kernelBlob":{"id":582165675,"settings":{"dockerImageVersionId":null,"dataSources":[{"sourceType":"DatasetVersion","sourceId":154358,"databundleVersionId":null,"mountSlug":""}],"sourceType":"notebook","language":"python","accelerator":"none","isInternetEnabled":false},"source":"{\u0022cells\u0022:[{\u0022metadata\u0022:{\u0022_uuid\u0022:\u002259b48bbc0052bdde951774503d6c601a6d0338e0\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022# Predicting customer lifetime value and future purchases \\n\\nIn most cases value of a firm is profits from existing and future customers (a.k.a. Customer Equity). Research done by Frederick Reichheld of Bain \u0026 Company (the inventor of the net promoter score) shows increasing customer retention rates by 5% increases profits by 25% to 95% (Reichheld 2001). \\n\\nIt is possible to calculate Customer Equity (CE) because Customer Lifetime Value (CLV) can be measured with a reasonable degree of precision.\\n\\n*CLV is the present value of the future (net) cash flows associated with the customer (Gupta and Lehmann 2003). It is a forward-looking concept, not to be confused with historic customer profitability.*\\n\\nNot all customers are equally important to a firm. Maintaining long-term relation with all of them (especially the loss makers) is not optimal because eventually marketing is all about attracting and retaining profitable customers (Kotler and Armstrong 1996). Hence the objective of CLV is firstly on general topics of firm’s profitability and secondly as an input in customer acquisition decision and customer acquisition/retention trade-offs (Berger and Nasr 1998).\\n\\n\\n## Objectives\\n\\nThe primary goal of this work is to build a probabilistic model for forecasting customer lifetime value in non-contractual setting on an individual level. \\n\\nUsing the results of this exercise, managers should be able to: \\n1. Distinguish active customers from inactive customers. \\n2. Generate transaction forecasts for individual customers.\\n3. Predict the purchase volume of the entire customer base.\\n\\n## Import packages\u0022},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u00228f2839f25d086af736a60e9eeb907d3b93b6e0e5\u0022,\u0022_cell_guid\u0022:\u0022b1076dfc-b9ad-4769-8c92-a6c4dae69d19\u0022,\u0022trusted\u0022:true},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022%matplotlib inline\\n\\nimport numpy as np\\nimport pandas as pd\\nimport matplotlib.pyplot as plt\\nimport seaborn as sns\\nimport lifetimes\\n\\n#Let\u0027s make this notebook reproducible \\nnp.random.seed(42)\\n\\nimport random\\nrandom.seed(42)\\n\\nimport warnings\\nwarnings.filterwarnings(\u0027ignore\u0027)\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u0022b30f758c3558f308e6c807bb00783a179badf95f\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022#### Plotting parameters\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u002250d1ca73c9b79774d6cb84b8a2bbc2eb066ddcac\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022# Make the default figures a bit bigger\\nplt.rcParams[\u0027figure.figsize\u0027] = (7,4.5) \\nplt.rcParams[\\\u0022figure.dpi\\\u0022] = 140 \\n\\nsns.set(style=\\\u0022ticks\\\u0022)\\nsns.set_context(\\\u0022poster\\\u0022, font_scale = .5, rc={\\\u0022grid.linewidth\\\u0022: 5})\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u0022711ef6f3e4e84e5cc8d27f292236155c17add520\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022## Read data\\n\\nReading in transaction log. i.e. Amount spent per customer each day\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u0022d6d250d8983402a22444f46f40586b29076d6f5f\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022df1 = pd.read_csv(\u0027../input/olist_orders_dataset.csv\u0027)\\ndf2 = pd.read_csv(\u0027../input/olist_customers_dataset.csv\u0027)\\ndf3 = pd.read_csv(\u0027../input/olist_order_payments_dataset.csv\u0027)\\n\\ncols = [\u0027customer_id\u0027, \u0027order_id\u0027, \u0027order_purchase_timestamp\u0027]\\norders = df1[cols]\\norders = orders.set_index(\u0027customer_id\u0027)\\norders.drop_duplicates(inplace=True)\\n\\n# too few \\ncols = [\u0027order_id\u0027, \u0027payment_value\u0027]\\npayment = df3[cols]\\npayment = payment.set_index(\u0027order_id\u0027)\\npayment.drop_duplicates(inplace=True)\\n\\ncols = [\u0027customer_id\u0027, \u0027customer_unique_id\u0027]\\ncustomers = df2[cols]\\ncustomers = customers.set_index(\u0027customer_id\u0027)\\n\\nelog = pd.concat([orders,customers], axis=1, join=\u0027inner\u0027)\\nelog.reset_index(inplace=True)\\n\\ncols = [\u0027customer_unique_id\u0027, \u0027order_purchase_timestamp\u0027]\\nelog = elog[cols]\\n\\nelog[\u0027order_purchase_timestamp\u0027] = pd.to_datetime(elog[\u0027order_purchase_timestamp\u0027])\\nelog[\u0027order_date\u0027] = elog.order_purchase_timestamp.dt.date\\nelog[\u0027order_date\u0027] = pd.to_datetime(elog[\u0027order_date\u0027])\\n\\ncols = [\u0027customer_unique_id\u0027, \u0027order_date\u0027]\\nelog = elog[cols]\\n\\nelog.columns = [\u0027CUSTOMER_ID\u0027, \u0027ORDER_DATE\u0027]\\n\\n\\nelog.info()\\ndisplay(elog.sample(5))\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u0022bf0651defdc4dd11885ab9497535da84f3d90899\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022#### Date range of orders\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u002215b02e3bad03d50a37f33925ed806846266fe1cf\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022elog.ORDER_DATE.describe()\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u0022efbd8493cafe7e01e344a127de1cb893ce4d5878\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022## Creating RFM Matrix based on transaction log\\n\\n#### Spliting calibration and holdout period\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u0022711f3ade686d53b476859ede73ed3efea838f5f7\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022%%time\\ncalibration_period_ends = \u00272018-06-30\u0027\\n\\nfrom lifetimes.utils import calibration_and_holdout_data\\n\\nsummary_cal_holdout = calibration_and_holdout_data(elog, \\n                                                   customer_id_col = \u0027CUSTOMER_ID\u0027, \\n                                                   datetime_col = \u0027ORDER_DATE\u0027, \\n                                                   freq = \u0027D\u0027, #days\\n                                        calibration_period_end=calibration_period_ends,\\n                                        observation_period_end=\u00272018-09-28\u0027 )\\n\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u00224f8a7350c75f0e65b2ab268df93af05928e0bb89\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022### Feature set\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u00221f7a7651e9847fcacf90d088df7bab06b3e0d023\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022summary_cal_holdout.head()\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u00220ff050571f64d7ff055c1ec75e73405de3b7ee3b\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022## Training model - MBG/NBD \\n\\nModel assumptions:\\n\\n* While active, the number of transactions made by a customer follows a Poisson process\\nwith transaction rate $\\\\lambda$.\\n* Heterogeneity in $\\\\lambda$ across customers follows a Gamma distribution with shape parameter $r$ and scale parameter $\\\\alpha$.\\n* At time zero and right after each purchase the customer becomes inactive with a constant probability $p$.\\n* Heterogeneity in $p$ across customers follows a Gamma distribution with parameter $a$ and $b$.\\n* The transaction rate $\\\\lambda$ and the dropout probability $p$ vary independently across customers.\\n\\n\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u002206b00500f891bfb351eaa2f2ed0326e3c019ac8f\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022%%time \\n\\nfrom lifetimes import ModifiedBetaGeoFitter\\n\\nmbgnbd = ModifiedBetaGeoFitter(penalizer_coef=0.01)\\nmbgnbd.fit(summary_cal_holdout[\u0027frequency_cal\u0027], \\n        summary_cal_holdout[\u0027recency_cal\u0027], \\n        summary_cal_holdout[\u0027T_cal\u0027],\\n       verbose=True)\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u0022ebdb80ae871066b13a4ca35536f92acf735b4812\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022print(mbgnbd)\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u0022ea6be8fcafc8fb5112491aeaf8b1cfc3ee6c014f\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022### Estimating customer lifetime value using the Gamma-Gamma model\\n\\nThe Gamma-Gamma model and the independence assumption:\\n\\nModel assumes that there is no relationship between the monetary value and the purchase frequency. In practice we need to check whether the Pearson correlation between the two vectors is close to 0 in order to use this model.\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u0022d605de62d5deaca94dcf0936dd1814403b7e156a\u0022,\u0022_kg_hide-input\u0022:true},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022#returning_customers_summary = summary_cal_holdout[summary_cal_holdout[\u0027frequency_cal\u0027] \u003e 0]\\n#returning_customers_summary[[\u0027monetary_value_cal\u0027, \u0027frequency_cal\u0027]].corr()\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u00224ec9ea6d902b0204ac162f7234ebe8abe6121577\u0022,\u0022_kg_hide-input\u0022:true},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022#%%time \\n\\n#from lifetimes import GammaGammaFitter\\n\\n#gg = GammaGammaFitter(penalizer_coef = 0.01)\\n#gg.fit(returning_customers_summary[\u0027frequency_cal\u0027],\\n#        returning_customers_summary[\u0027monetary_value_cal\u0027],\\n#       verbose=True)\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u0022aec47f5c38fa890f2f2ca36a497bc20066e2fe6c\u0022,\u0022_kg_hide-input\u0022:true},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022#print(gg)\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u0022a5803bf9fc8a52918915435454de049ed9a87d3f\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022### Predictions for each customer\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u0022ec3668096871a6cb10283367eef7151654d631fa\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022t = 90 # days to predict in the future \\nsummary_cal_holdout[\u0027predicted_purchases\u0027] = mbgnbd.conditional_expected_number_of_purchases_up_to_time(t, \\n                                                                                      summary_cal_holdout[\u0027frequency_cal\u0027], \\n                                                                                      summary_cal_holdout[\u0027recency_cal\u0027], \\n                                                                                      summary_cal_holdout[\u0027T_cal\u0027])\\n\\nsummary_cal_holdout[\u0027p_alive\u0027] = mbgnbd.conditional_probability_alive(summary_cal_holdout[\u0027frequency_cal\u0027], \\n                                                                         summary_cal_holdout[\u0027recency_cal\u0027], \\n                                                                         summary_cal_holdout[\u0027T_cal\u0027])\\nsummary_cal_holdout[\u0027p_alive\u0027] = np.round(summary_cal_holdout[\u0027p_alive\u0027] / summary_cal_holdout[\u0027p_alive\u0027].max(), 2)\\n\\n#summary_cal_holdout[\u0027clv\u0027] = gg.customer_lifetime_value(\\n#    mbgnbd, #the model to use to predict the number of future transactions\\n#    summary_cal_holdout[\u0027frequency_cal\u0027],\\n#    summary_cal_holdout[\u0027recency_cal\u0027],\\n#    summary_cal_holdout[\u0027T_cal\u0027],\\n#    summary_cal_holdout[\u0027monetary_value_cal\u0027],\\n#    time=3, # months\\n#    discount_rate=0 #0.0025 # = 0.03/12 monthly discount rate ~ 3% annually\\n#)\\n#summary_cal_holdout[\u0027clv\u0027] += (-1*summary_cal_holdout[\u0027clv\u0027].min())\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u0022621cb52c296dbc33b414f7e2cc7ddf649dd3321c\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022display(summary_cal_holdout.sample(2).T)\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u00222861c0efb92872d6dbe5857a5994dc75fb2f835f\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022## Model evaluation\\n\\n### Accessing model fit\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u0022175cc7fecd2e3b4dc18c5cca85c4a85ba446bf26\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022%%time \\n\\nfrom lifetimes.plotting import plot_period_transactions\\nax = plot_period_transactions(mbgnbd, max_frequency=7)\\nax.set_yscale(\u0027log\u0027)\\nsns.despine();\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u00221b7bcc236080da3725578f7023679fe91a051623\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022%%time \\n\\nfrom lifetimes.plotting import plot_calibration_purchases_vs_holdout_purchases\\n\\nplot_calibration_purchases_vs_holdout_purchases(mbgnbd, summary_cal_holdout)\\nsns.despine();\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u0022be840ca57ca3a30b07a0dbb547f7d1c9fdbb9363\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022### Customer Probability History\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u0022ad788a79de8c619fa2c2f4dfc08b69b5939182a1\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022from lifetimes.plotting import plot_history_alive\\nfrom datetime import date\\nfrom pylab import figure, text, scatter, show\\n\\nindividual = summary_cal_holdout.iloc[4942]\\n\\nid = individual.name\\nt = 365*50\\n\\ntoday = date.today()\\ntwo_year_ago = today.replace(year=today.year - 2)\\none_year_from_now = today.replace(year=today.year + 1)\\n\\nsp_trans = elog.loc[elog[\u0027CUSTOMER_ID\u0027] == id]\\n\\nfrom lifetimes.utils import calculate_alive_path\\n\\nt = (today - sp_trans.ORDER_DATE.min().date()).days\\np_alive_today = pd.DataFrame(calculate_alive_path(mbgnbd, sp_trans, \u0027ORDER_DATE\u0027, t, freq=\u0027D\u0027))[0].tail(1).values\\np_alive_today = np.round(p_alive_today[0], 2)\\nprint(\u0027Probability that customer is alive today is\u0027, p_alive_today)\\n\\nt = (one_year_from_now - sp_trans.ORDER_DATE.min().date()).days\\nax = plot_history_alive(mbgnbd, t, sp_trans, \u0027ORDER_DATE\u0027, start_date=two_year_ago) #, start_date=\u00272016-01-01\u0027\\nax.vlines(x=today, ymin=0, ymax=1.05, colors=\u0027#4C4C4C\u0027)\\nax.hlines(y=0.8, xmin=two_year_ago, xmax=one_year_from_now, colors=\u0027#4C4C4C\u0027)\\n\\nax.set_xlim(two_year_ago, one_year_from_now) # sp_trans.ORDER_DATE.min()\\nax.set_ylim(0, 1.05)\\n\\nplt.xticks(rotation=-90)\\ntext(0.75, 0.1, p_alive_today, ha=\u0027center\u0027, va=\u0027center\u0027, transform=ax.transAxes)\\n\\nsns.despine()\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u0022968c443186899ae508ac7213db60141eb91d2fe6\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022### Predicted Transactions with Time\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u00223de19725be85ded0db91ef2249cf30875a22160e\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022elog.columns = [\u0027CUSTOMER_ID\u0027, \u0027date\u0027]\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u002249d1f7769e7021e03b1ffe273062ed6ac2446f36\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022%%time\\n# Get expected and actual repeated cumulative transactions.\\n\\nfrom lifetimes.utils import expected_cumulative_transactions\\n\\nt = (elog.date.max() - elog.date.min()).days\\ndf = expected_cumulative_transactions(mbgnbd, elog, \u0027date\u0027, \u0027CUSTOMER_ID\u0027, t)\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u00229b18d5b1571e2711d2257c445ee999b57922ffc0\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022df.tail()\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u0022748f80c5df32c4d775be8dfb7ce066c6b23c0c0a\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022%%time\\n# Calibration period = 2016-09-04 to 2017-09-30\\nfrom datetime import datetime\\n\\ncal = datetime.strptime(\u00272018-06-30\u0027, \u0027%Y-%m-%d\u0027)\\n\\nfrom lifetimes.plotting import plot_cumulative_transactions\\nt = (elog.date.max() - elog.date.min()).days\\nt_cal = (cal - elog.date.min()).days\\nplot_cumulative_transactions(mbgnbd, elog, \u0027date\u0027, \u0027CUSTOMER_ID\u0027, t, t_cal, freq=\u0027D\u0027)\\nsns.despine()\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u002287a1bea61c304b77db22e00eadfa49c28621ced2\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022%%time \\n\\nfrom lifetimes.plotting import plot_incremental_transactions\\nplot_incremental_transactions(mbgnbd, elog, \u0027date\u0027, \u0027CUSTOMER_ID\u0027, t, t_cal, freq=\u0027D\u0027)\\nsns.despine()\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u002274b1bfa72836b560837ba67d7a6eef6bbf702414\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022### Predict the conditional, expected average lifetime value of our customers.\\n\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u0022577f82e3642b79432742117ae0043606fe1941db\u0022,\u0022_kg_hide-input\u0022:true},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022#print(\\\u0022Expected conditional average revenue: €%s, Average revenue: €%s\\\u0022 % (\\n#    np.round(gg.conditional_expected_average_profit(\\n#        returning_customers_summary[\u0027frequency_cal\u0027],\\n#        returning_customers_summary[\u0027monetary_value_cal\u0027]\\n#    ).mean(), 2),\\n#    np.round(returning_customers_summary[returning_customers_summary[\u0027frequency_cal\u0027]\u003e0][\u0027monetary_value_cal\u0027].mean(), 2)\\n#))\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u0022646df7815e94db36673d969e261a5853a6010010\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022### Model performance will increase if it is trained on all the data and not a sample as is the case here\\n\\nCheers..\\n\\nhttps://github.com/1dhiman \\n\\nhttp://linkedin.com/in/dhimananubhav\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u002274b42b666033c6006e4ada9792b8f1ae1de1c1df\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]}],\u0022metadata\u0022:{\u0022kernelspec\u0022:{\u0022display_name\u0022:\u0022Python 3\u0022,\u0022language\u0022:\u0022python\u0022,\u0022name\u0022:\u0022python3\u0022},\u0022language_info\u0022:{\u0022name\u0022:\u0022python\u0022,\u0022version\u0022:\u00223.6.6\u0022,\u0022mimetype\u0022:\u0022text/x-python\u0022,\u0022codemirror_mode\u0022:{\u0022name\u0022:\u0022ipython\u0022,\u0022version\u0022:3},\u0022pygments_lexer\u0022:\u0022ipython3\u0022,\u0022nbconvert_exporter\u0022:\u0022python\u0022,\u0022file_extension\u0022:\u0022.py\u0022}},\u0022nbformat\u0022:4,\u0022nbformat_minor\u0022:1}","dateCreated":"2019-10-25T21:03:24.9246426Z"},"kernelRun":{"id":22553650,"kernelId":1949320,"status":"complete","type":"batch","sourceType":"notebook","language":"python","title":"E-Commerce predicting customer lifetime value","dateCreated":"2019-10-25T21:03:25.15Z","dateEvaluated":"2019-10-25T21:03:25.59Z","dateCancelled":null,"workerContainerPort":null,"workerUptimeSeconds":13892,"workerIPAddress":"172.21.63.183  ","workerIPAddressExternal":"35.196.1.90    ","scriptLanguageId":9,"scriptLanguageName":"IPython Notebook HTML","renderedOutputUrl":"https://www.kaggleusercontent.com/kf/22553650/eyJhbGciOiJkaXIiLCJlbmMiOiJBMTI4Q0JDLUhTMjU2In0..FshRw5LXdcjdc-kElif61w.yOEdhCFJfv0acwv9L0DK8F-vgsg0zQpfg095M8ftoiAIejP4RhBPzwDjFqEiQ1GkWi9JH9y-PfOTHWzuMUECf4y-4w-hjaMZMCma8rRUuAQnIJlBCed2zGTMcaiX6-bZvitzETUUbHcQt11x-KaYhVDZc6NCYxLX50RxHsDnRSz25jwMji_2fSNSgPE6qKSo.nHPjYSlktrYSpUxKstxPTw/__results__.html","commit":{"id":582165675,"settings":{"dockerImageVersionId":null,"dataSources":[{"sourceType":"DatasetVersion","sourceId":154358,"databundleVersionId":null,"mountSlug":""}],"sourceType":"notebook","language":"python","accelerator":"none","isInternetEnabled":false},"source":"{\u0022cells\u0022:[{\u0022metadata\u0022:{\u0022_uuid\u0022:\u002259b48bbc0052bdde951774503d6c601a6d0338e0\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022# Predicting customer lifetime value and future purchases \\n\\nIn most cases value of a firm is profits from existing and future customers (a.k.a. Customer Equity). Research done by Frederick Reichheld of Bain \u0026 Company (the inventor of the net promoter score) shows increasing customer retention rates by 5% increases profits by 25% to 95% (Reichheld 2001). \\n\\nIt is possible to calculate Customer Equity (CE) because Customer Lifetime Value (CLV) can be measured with a reasonable degree of precision.\\n\\n*CLV is the present value of the future (net) cash flows associated with the customer (Gupta and Lehmann 2003). It is a forward-looking concept, not to be confused with historic customer profitability.*\\n\\nNot all customers are equally important to a firm. Maintaining long-term relation with all of them (especially the loss makers) is not optimal because eventually marketing is all about attracting and retaining profitable customers (Kotler and Armstrong 1996). Hence the objective of CLV is firstly on general topics of firm’s profitability and secondly as an input in customer acquisition decision and customer acquisition/retention trade-offs (Berger and Nasr 1998).\\n\\n\\n## Objectives\\n\\nThe primary goal of this work is to build a probabilistic model for forecasting customer lifetime value in non-contractual setting on an individual level. \\n\\nUsing the results of this exercise, managers should be able to: \\n1. Distinguish active customers from inactive customers. \\n2. Generate transaction forecasts for individual customers.\\n3. Predict the purchase volume of the entire customer base.\\n\\n## Import packages\u0022},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u00228f2839f25d086af736a60e9eeb907d3b93b6e0e5\u0022,\u0022_cell_guid\u0022:\u0022b1076dfc-b9ad-4769-8c92-a6c4dae69d19\u0022,\u0022trusted\u0022:true},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022%matplotlib inline\\n\\nimport numpy as np\\nimport pandas as pd\\nimport matplotlib.pyplot as plt\\nimport seaborn as sns\\nimport lifetimes\\n\\n#Let\u0027s make this notebook reproducible \\nnp.random.seed(42)\\n\\nimport random\\nrandom.seed(42)\\n\\nimport warnings\\nwarnings.filterwarnings(\u0027ignore\u0027)\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u0022b30f758c3558f308e6c807bb00783a179badf95f\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022#### Plotting parameters\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u002250d1ca73c9b79774d6cb84b8a2bbc2eb066ddcac\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022# Make the default figures a bit bigger\\nplt.rcParams[\u0027figure.figsize\u0027] = (7,4.5) \\nplt.rcParams[\\\u0022figure.dpi\\\u0022] = 140 \\n\\nsns.set(style=\\\u0022ticks\\\u0022)\\nsns.set_context(\\\u0022poster\\\u0022, font_scale = .5, rc={\\\u0022grid.linewidth\\\u0022: 5})\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u0022711ef6f3e4e84e5cc8d27f292236155c17add520\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022## Read data\\n\\nReading in transaction log. i.e. Amount spent per customer each day\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u0022d6d250d8983402a22444f46f40586b29076d6f5f\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022df1 = pd.read_csv(\u0027../input/olist_orders_dataset.csv\u0027)\\ndf2 = pd.read_csv(\u0027../input/olist_customers_dataset.csv\u0027)\\ndf3 = pd.read_csv(\u0027../input/olist_order_payments_dataset.csv\u0027)\\n\\ncols = [\u0027customer_id\u0027, \u0027order_id\u0027, \u0027order_purchase_timestamp\u0027]\\norders = df1[cols]\\norders = orders.set_index(\u0027customer_id\u0027)\\norders.drop_duplicates(inplace=True)\\n\\n# too few \\ncols = [\u0027order_id\u0027, \u0027payment_value\u0027]\\npayment = df3[cols]\\npayment = payment.set_index(\u0027order_id\u0027)\\npayment.drop_duplicates(inplace=True)\\n\\ncols = [\u0027customer_id\u0027, \u0027customer_unique_id\u0027]\\ncustomers = df2[cols]\\ncustomers = customers.set_index(\u0027customer_id\u0027)\\n\\nelog = pd.concat([orders,customers], axis=1, join=\u0027inner\u0027)\\nelog.reset_index(inplace=True)\\n\\ncols = [\u0027customer_unique_id\u0027, \u0027order_purchase_timestamp\u0027]\\nelog = elog[cols]\\n\\nelog[\u0027order_purchase_timestamp\u0027] = pd.to_datetime(elog[\u0027order_purchase_timestamp\u0027])\\nelog[\u0027order_date\u0027] = elog.order_purchase_timestamp.dt.date\\nelog[\u0027order_date\u0027] = pd.to_datetime(elog[\u0027order_date\u0027])\\n\\ncols = [\u0027customer_unique_id\u0027, \u0027order_date\u0027]\\nelog = elog[cols]\\n\\nelog.columns = [\u0027CUSTOMER_ID\u0027, \u0027ORDER_DATE\u0027]\\n\\n\\nelog.info()\\ndisplay(elog.sample(5))\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u0022bf0651defdc4dd11885ab9497535da84f3d90899\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022#### Date range of orders\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u002215b02e3bad03d50a37f33925ed806846266fe1cf\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022elog.ORDER_DATE.describe()\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u0022efbd8493cafe7e01e344a127de1cb893ce4d5878\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022## Creating RFM Matrix based on transaction log\\n\\n#### Spliting calibration and holdout period\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u0022711f3ade686d53b476859ede73ed3efea838f5f7\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022%%time\\ncalibration_period_ends = \u00272018-06-30\u0027\\n\\nfrom lifetimes.utils import calibration_and_holdout_data\\n\\nsummary_cal_holdout = calibration_and_holdout_data(elog, \\n                                                   customer_id_col = \u0027CUSTOMER_ID\u0027, \\n                                                   datetime_col = \u0027ORDER_DATE\u0027, \\n                                                   freq = \u0027D\u0027, #days\\n                                        calibration_period_end=calibration_period_ends,\\n                                        observation_period_end=\u00272018-09-28\u0027 )\\n\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u00224f8a7350c75f0e65b2ab268df93af05928e0bb89\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022### Feature set\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u00221f7a7651e9847fcacf90d088df7bab06b3e0d023\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022summary_cal_holdout.head()\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u00220ff050571f64d7ff055c1ec75e73405de3b7ee3b\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022## Training model - MBG/NBD \\n\\nModel assumptions:\\n\\n* While active, the number of transactions made by a customer follows a Poisson process\\nwith transaction rate $\\\\lambda$.\\n* Heterogeneity in $\\\\lambda$ across customers follows a Gamma distribution with shape parameter $r$ and scale parameter $\\\\alpha$.\\n* At time zero and right after each purchase the customer becomes inactive with a constant probability $p$.\\n* Heterogeneity in $p$ across customers follows a Gamma distribution with parameter $a$ and $b$.\\n* The transaction rate $\\\\lambda$ and the dropout probability $p$ vary independently across customers.\\n\\n\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u002206b00500f891bfb351eaa2f2ed0326e3c019ac8f\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022%%time \\n\\nfrom lifetimes import ModifiedBetaGeoFitter\\n\\nmbgnbd = ModifiedBetaGeoFitter(penalizer_coef=0.01)\\nmbgnbd.fit(summary_cal_holdout[\u0027frequency_cal\u0027], \\n        summary_cal_holdout[\u0027recency_cal\u0027], \\n        summary_cal_holdout[\u0027T_cal\u0027],\\n       verbose=True)\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u0022ebdb80ae871066b13a4ca35536f92acf735b4812\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022print(mbgnbd)\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u0022ea6be8fcafc8fb5112491aeaf8b1cfc3ee6c014f\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022### Estimating customer lifetime value using the Gamma-Gamma model\\n\\nThe Gamma-Gamma model and the independence assumption:\\n\\nModel assumes that there is no relationship between the monetary value and the purchase frequency. In practice we need to check whether the Pearson correlation between the two vectors is close to 0 in order to use this model.\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u0022d605de62d5deaca94dcf0936dd1814403b7e156a\u0022,\u0022_kg_hide-input\u0022:true},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022#returning_customers_summary = summary_cal_holdout[summary_cal_holdout[\u0027frequency_cal\u0027] \u003e 0]\\n#returning_customers_summary[[\u0027monetary_value_cal\u0027, \u0027frequency_cal\u0027]].corr()\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u00224ec9ea6d902b0204ac162f7234ebe8abe6121577\u0022,\u0022_kg_hide-input\u0022:true},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022#%%time \\n\\n#from lifetimes import GammaGammaFitter\\n\\n#gg = GammaGammaFitter(penalizer_coef = 0.01)\\n#gg.fit(returning_customers_summary[\u0027frequency_cal\u0027],\\n#        returning_customers_summary[\u0027monetary_value_cal\u0027],\\n#       verbose=True)\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u0022aec47f5c38fa890f2f2ca36a497bc20066e2fe6c\u0022,\u0022_kg_hide-input\u0022:true},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022#print(gg)\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u0022a5803bf9fc8a52918915435454de049ed9a87d3f\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022### Predictions for each customer\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u0022ec3668096871a6cb10283367eef7151654d631fa\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022t = 90 # days to predict in the future \\nsummary_cal_holdout[\u0027predicted_purchases\u0027] = mbgnbd.conditional_expected_number_of_purchases_up_to_time(t, \\n                                                                                      summary_cal_holdout[\u0027frequency_cal\u0027], \\n                                                                                      summary_cal_holdout[\u0027recency_cal\u0027], \\n                                                                                      summary_cal_holdout[\u0027T_cal\u0027])\\n\\nsummary_cal_holdout[\u0027p_alive\u0027] = mbgnbd.conditional_probability_alive(summary_cal_holdout[\u0027frequency_cal\u0027], \\n                                                                         summary_cal_holdout[\u0027recency_cal\u0027], \\n                                                                         summary_cal_holdout[\u0027T_cal\u0027])\\nsummary_cal_holdout[\u0027p_alive\u0027] = np.round(summary_cal_holdout[\u0027p_alive\u0027] / summary_cal_holdout[\u0027p_alive\u0027].max(), 2)\\n\\n#summary_cal_holdout[\u0027clv\u0027] = gg.customer_lifetime_value(\\n#    mbgnbd, #the model to use to predict the number of future transactions\\n#    summary_cal_holdout[\u0027frequency_cal\u0027],\\n#    summary_cal_holdout[\u0027recency_cal\u0027],\\n#    summary_cal_holdout[\u0027T_cal\u0027],\\n#    summary_cal_holdout[\u0027monetary_value_cal\u0027],\\n#    time=3, # months\\n#    discount_rate=0 #0.0025 # = 0.03/12 monthly discount rate ~ 3% annually\\n#)\\n#summary_cal_holdout[\u0027clv\u0027] += (-1*summary_cal_holdout[\u0027clv\u0027].min())\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u0022621cb52c296dbc33b414f7e2cc7ddf649dd3321c\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022display(summary_cal_holdout.sample(2).T)\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u00222861c0efb92872d6dbe5857a5994dc75fb2f835f\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022## Model evaluation\\n\\n### Accessing model fit\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u0022175cc7fecd2e3b4dc18c5cca85c4a85ba446bf26\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022%%time \\n\\nfrom lifetimes.plotting import plot_period_transactions\\nax = plot_period_transactions(mbgnbd, max_frequency=7)\\nax.set_yscale(\u0027log\u0027)\\nsns.despine();\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u00221b7bcc236080da3725578f7023679fe91a051623\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022%%time \\n\\nfrom lifetimes.plotting import plot_calibration_purchases_vs_holdout_purchases\\n\\nplot_calibration_purchases_vs_holdout_purchases(mbgnbd, summary_cal_holdout)\\nsns.despine();\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u0022be840ca57ca3a30b07a0dbb547f7d1c9fdbb9363\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022### Customer Probability History\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u0022ad788a79de8c619fa2c2f4dfc08b69b5939182a1\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022from lifetimes.plotting import plot_history_alive\\nfrom datetime import date\\nfrom pylab import figure, text, scatter, show\\n\\nindividual = summary_cal_holdout.iloc[4942]\\n\\nid = individual.name\\nt = 365*50\\n\\ntoday = date.today()\\ntwo_year_ago = today.replace(year=today.year - 2)\\none_year_from_now = today.replace(year=today.year + 1)\\n\\nsp_trans = elog.loc[elog[\u0027CUSTOMER_ID\u0027] == id]\\n\\nfrom lifetimes.utils import calculate_alive_path\\n\\nt = (today - sp_trans.ORDER_DATE.min().date()).days\\np_alive_today = pd.DataFrame(calculate_alive_path(mbgnbd, sp_trans, \u0027ORDER_DATE\u0027, t, freq=\u0027D\u0027))[0].tail(1).values\\np_alive_today = np.round(p_alive_today[0], 2)\\nprint(\u0027Probability that customer is alive today is\u0027, p_alive_today)\\n\\nt = (one_year_from_now - sp_trans.ORDER_DATE.min().date()).days\\nax = plot_history_alive(mbgnbd, t, sp_trans, \u0027ORDER_DATE\u0027, start_date=two_year_ago) #, start_date=\u00272016-01-01\u0027\\nax.vlines(x=today, ymin=0, ymax=1.05, colors=\u0027#4C4C4C\u0027)\\nax.hlines(y=0.8, xmin=two_year_ago, xmax=one_year_from_now, colors=\u0027#4C4C4C\u0027)\\n\\nax.set_xlim(two_year_ago, one_year_from_now) # sp_trans.ORDER_DATE.min()\\nax.set_ylim(0, 1.05)\\n\\nplt.xticks(rotation=-90)\\ntext(0.75, 0.1, p_alive_today, ha=\u0027center\u0027, va=\u0027center\u0027, transform=ax.transAxes)\\n\\nsns.despine()\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u0022968c443186899ae508ac7213db60141eb91d2fe6\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022### Predicted Transactions with Time\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u00223de19725be85ded0db91ef2249cf30875a22160e\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022elog.columns = [\u0027CUSTOMER_ID\u0027, \u0027date\u0027]\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u002249d1f7769e7021e03b1ffe273062ed6ac2446f36\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022%%time\\n# Get expected and actual repeated cumulative transactions.\\n\\nfrom lifetimes.utils import expected_cumulative_transactions\\n\\nt = (elog.date.max() - elog.date.min()).days\\ndf = expected_cumulative_transactions(mbgnbd, elog, \u0027date\u0027, \u0027CUSTOMER_ID\u0027, t)\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u00229b18d5b1571e2711d2257c445ee999b57922ffc0\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022df.tail()\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u0022748f80c5df32c4d775be8dfb7ce066c6b23c0c0a\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022%%time\\n# Calibration period = 2016-09-04 to 2017-09-30\\nfrom datetime import datetime\\n\\ncal = datetime.strptime(\u00272018-06-30\u0027, \u0027%Y-%m-%d\u0027)\\n\\nfrom lifetimes.plotting import plot_cumulative_transactions\\nt = (elog.date.max() - elog.date.min()).days\\nt_cal = (cal - elog.date.min()).days\\nplot_cumulative_transactions(mbgnbd, elog, \u0027date\u0027, \u0027CUSTOMER_ID\u0027, t, t_cal, freq=\u0027D\u0027)\\nsns.despine()\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u002287a1bea61c304b77db22e00eadfa49c28621ced2\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022%%time \\n\\nfrom lifetimes.plotting import plot_incremental_transactions\\nplot_incremental_transactions(mbgnbd, elog, \u0027date\u0027, \u0027CUSTOMER_ID\u0027, t, t_cal, freq=\u0027D\u0027)\\nsns.despine()\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u002274b1bfa72836b560837ba67d7a6eef6bbf702414\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022### Predict the conditional, expected average lifetime value of our customers.\\n\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u0022577f82e3642b79432742117ae0043606fe1941db\u0022,\u0022_kg_hide-input\u0022:true},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022#print(\\\u0022Expected conditional average revenue: €%s, Average revenue: €%s\\\u0022 % (\\n#    np.round(gg.conditional_expected_average_profit(\\n#        returning_customers_summary[\u0027frequency_cal\u0027],\\n#        returning_customers_summary[\u0027monetary_value_cal\u0027]\\n#    ).mean(), 2),\\n#    np.round(returning_customers_summary[returning_customers_summary[\u0027frequency_cal\u0027]\u003e0][\u0027monetary_value_cal\u0027].mean(), 2)\\n#))\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]},{\u0022metadata\u0022:{\u0022_uuid\u0022:\u0022646df7815e94db36673d969e261a5853a6010010\u0022},\u0022cell_type\u0022:\u0022markdown\u0022,\u0022source\u0022:\u0022### Model performance will increase if it is trained on all the data and not a sample as is the case here\\n\\nCheers..\\n\\nhttps://github.com/1dhiman \\n\\nhttp://linkedin.com/in/dhimananubhav\u0022},{\u0022metadata\u0022:{\u0022trusted\u0022:true,\u0022_uuid\u0022:\u002274b42b666033c6006e4ada9792b8f1ae1de1c1df\u0022},\u0022cell_type\u0022:\u0022code\u0022,\u0022source\u0022:\u0022\u0022,\u0022execution_count\u0022:null,\u0022outputs\u0022:[]}],\u0022metadata\u0022:{\u0022kernelspec\u0022:{\u0022display_name\u0022:\u0022Python 3\u0022,\u0022language\u0022:\u0022python\u0022,\u0022name\u0022:\u0022python3\u0022},\u0022language_info\u0022:{\u0022name\u0022:\u0022python\u0022,\u0022version\u0022:\u00223.6.6\u0022,\u0022mimetype\u0022:\u0022text/x-python\u0022,\u0022codemirror_mode\u0022:{\u0022name\u0022:\u0022ipython\u0022,\u0022version\u0022:3},\u0022pygments_lexer\u0022:\u0022ipython3\u0022,\u0022nbconvert_exporter\u0022:\u0022python\u0022,\u0022file_extension\u0022:\u0022.py\u0022}},\u0022nbformat\u0022:4,\u0022nbformat_minor\u0022:1}","dateCreated":"2019-10-25T21:03:24.9246426Z"},"resources":null,"isolatorResults":"\u003cresults\u003e\u003cdisk_kb_free\u003e4821352\u003c/disk_kb_free\u003e\u003cdocker_image_digest\u003e2c68f11b64cfc056508f6c825bbc6e0112322090f39d3d63dbfcfb9bc3a2c7c3\u003c/docker_image_digest\u003e\u003cdocker_image_id\u003esha256:e6c1f46ab7143adc37f0d69cc9837ea26bdd6156ed493fc03aaa4303d9f44346\u003c/docker_image_id\u003e\u003cdocker_image_name\u003egcr.io/kaggle-user-images/dhimananubhav/lifetimes@sha256:2c68f11b64cfc056508f6c825bbc6e0112322090f39d3d63dbfcfb9bc3a2c7c3\u003c/docker_image_name\u003e\u003cexit_code\u003e0\u003c/exit_code\u003e\u003cfailure_message /\u003e\u003cinvalid_path_errors\u003eFalse\u003c/invalid_path_errors\u003e\u003cout_of_memory\u003eFalse\u003c/out_of_memory\u003e\u003crun_time_seconds\u003e165.29023714100003\u003c/run_time_seconds\u003e\u003csucceeded\u003eTrue\u003c/succeeded\u003e\u003ctimeout_exceeded\u003eFalse\u003c/timeout_exceeded\u003e\u003cused_all_space\u003eFalse\u003c/used_all_space\u003e\u003cwas_killed\u003eFalse\u003c/was_killed\u003e\u003c/results\u003e","runInfo":{"dockerfileUrl":null,"dockerHubUrl":null,"dockerImageDigest":"2c68f11b64cfc056508f6c825bbc6e0112322090f39d3d63dbfcfb9bc3a2c7c3","dockerImageId":"sha256:e6c1f46ab7143adc37f0d69cc9837ea26bdd6156ed493fc03aaa4303d9f44346","dockerImageName":"dhimananubhav/lifetimes","diskKbFree":4821352,"failureMessage":"","exitCode":0,"queuedSeconds":0,"outputSizeBytes":0,"runTimeSeconds":165.29023714100003,"usedAllSpace":false,"timeoutExceeded":false,"isValidStatus":false,"wasGpuEnabled":false,"wasInternetEnabled":false,"outOfMemory":false,"invalidPathErrors":false,"succeeded":true,"wasKilled":false},"outputFilesTotalSizeBytes":598574,"dockerImageVersionId":13461,"usedCustomDockerImage":true,"dataSources":[{"sourceType":"DatasetVersion","sourceId":195341,"databundleVersionId":null,"mountSlug":""}],"useNewKernelsBackend":null},"author":{"id":685355,"displayName":"Anubhav Dhiman","email":null,"editedEmail":null,"editedEmailCode":null,"userName":"dhimananubhav","thumbnailUrl":"https://storage.googleapis.com/kaggle-avatars/thumbnails/685355-gr.jpg","profileUrl":"/dhimananubhav","registerDate":"0001-01-01T00:00:00Z","lastVisitDate":"0001-01-01T00:00:00Z","statusId":0,"performanceTier":2,"userRoles":null,"userLogins":null,"groupIds":null,"duplicateUsers":null,"hasPhoneVerifications":false,"failedNerdchas":0,"hasPendingNerdcha":false,"deleteRequests":null,"userAttributes":null,"isAdmin":false,"isTvc":false,"isKaggleBot":false,"isAdminOrTvc":false,"isAnonymous":false,"canAct":false,"canBeSeen":false,"thumbnailName":null,"isPhoneVerified":false},"baseUrl":"/dhimananubhav/e-commerce-predicting-customer-lifetime-value","collaborators":{"owner":{"userId":685355,"groupId":null,"groupMemberCount":null,"profileUrl":"/dhimananubhav","thumbnailUrl":"https://storage.googleapis.com/kaggle-avatars/thumbnails/685355-gr.jpg","name":"Anubhav Dhiman","slug":"dhimananubhav","userTier":2,"joinDate":null,"type":"owner","isUser":true,"isGroup":false},"collaborators":[]},"initialTab":null,"log":"[{\n  \u0022data\u0022: \u0022[NbConvertApp] Converting notebook __notebook__.ipynb to notebook\\n\u0022,\n  \u0022stream_name\u0022: \u0022stderr\u0022,\n  \u0022time\u0022: 12.451797501000328\n},{\n  \u0022data\u0022: \u0022[NbConvertApp] Executing notebook with kernel: python3\\n\u0022,\n  \u0022stream_name\u0022: \u0022stderr\u0022,\n  \u0022time\u0022: 18.333916761999717\n},{\n  \u0022data\u0022: \u0022[NbConvertApp] Writing 391298 bytes to __notebook__.ipynb\\n\u0022,\n  \u0022stream_name\u0022: \u0022stderr\u0022,\n  \u0022time\u0022: 158.55922813899997\n},{\n  \u0022data\u0022: \u0022[NbConvertApp] Converting notebook __notebook__.ipynb to html\\n\u0022,\n  \u0022stream_name\u0022: \u0022stderr\u0022,\n  \u0022time\u0022: 163.67261207900083\n},{\n  \u0022data\u0022: \u0022[NbConvertApp] Support files will be in __results___files/\\n[NbConvertApp] Making directory __results___files\\n\u0022,\n  \u0022stream_name\u0022: \u0022stderr\u0022,\n  \u0022time\u0022: 164.55979512699923\n},{\n  \u0022data\u0022: \u0022[NbConvertApp] Making directory __results___files\\n[NbConvertApp] Making directory __results___files\\n[NbConvertApp] Making directory __results___files\\n[NbConvertApp] Making directory __results___files\\n[NbConvertApp] Writing 329848 bytes to __results__.html\\n\u0022,\n  \u0022stream_name\u0022: \u0022stderr\u0022,\n  \u0022time\u0022: 164.56218983799954\n}]","outputFiles":[],"outputFilesCropped":false,"ouputFilesOwnerInfo":{"databundleVersionId":0,"dataset":null,"competition":null,"kernel":{"kernelId":1949320,"kernelVersionId":22553650,"dataviewToken":"eyJhbGciOiJkaXIiLCJlbmMiOiJBMTI4Q0JDLUhTMjU2In0..mfNQ2RCqwH0O6A39arWNUQ.tka5Q1EcNOFocB36VUcM9luxmZ0AU6YmKKbsIE3JSmpMboMTQvQPHO-eml1rJtWrpZajL_LjpV3QCIQJBnC5NQNSDXaTMdsq5q4xcYEQH1J88TsP0IYv5t-D0vEJgmUSRMfTfir1qLKb_jGfCkA8qcOFWEOZGXwVD3PyCWJTlEV6KptjJy2gcby_G2mb7Fa0xuIDsQmng0wYf-gqlylb5Fm9ADCFa4sU3teJGV3CjvTlbmyfMhhfMNXOF-MZxXSMiwDuDVOIoEvSl0vrC-wuzAX9z7t9OHa-SVuucjC8Z4P6_5SWRyQU3zLsFYHXhg2HQm9HbqvpzoZTcqnlzi-RG8D_K2G8TfKksAEYma1-njWJdyAkqOej4qWkOOt7-NXwX1-DTdADHQESyOiRzG_zyiQvrz0dUYWcr9Os26oSgqGI-L8dHjMUHGUExyEDqbnTdzp1rZWQURaG2W9CZoHZSsCRuCeE0VUdRi9o8pbE04B9nw4HkqFpY84jFU_KovK1.Pyp3TeM1I_jBZ2O5-Q6OKQ","scope":"dhimananubhav/e-commerce-predicting-customer-lifetime-value"},"previewsDisabled":false},"pageMessages":[],"dataSources":[{"sourceType":"DatasetVersion","sourceId":195341,"databundleVersionId":null,"mountSlug":""}],"versions":[{"id":22553650,"kernelVersionId":null,"isForkParent":false,"isNotebook":true,"languageName":"Python","lastRunTime":"2019-10-25T21:03:25.15Z","linesChangedFromPrevious":0,"linesDeletedFromPrevious":0,"linesInsertedFromPrevious":0,"outputFilesTotalSizeBytes":0,"runInfo":{"dockerfileUrl":"https://github.com/Kaggle/docker-lifetimes@sha256:2c68f11b64cfc056508f6c825bbc6e0112322090f39d3d63dbfcfb9bc3a2c7c3/blob/master/Dockerfile","dockerHubUrl":"https://registry.hub.docker.com/u/kaggle/lifetimes@sha256:2c68f11b64cfc056508f6c825bbc6e0112322090f39d3d63dbfcfb9bc3a2c7c3/","dockerImageId":"sha256:e6c1f46ab7143adc37f0d69cc9837ea26bdd6156ed493fc03aaa4303d9f44346","dockerImageName":"gcr.io/kaggle-user-images/dhimananubhav/lifetimes@sha256:2c68f11b64cfc056508f6c825bbc6e0112322090f39d3d63dbfcfb9bc3a2c7c3","exitCode":0,"failureMessage":"","isValidStatus":true,"runTimeSeconds":165.29023714100003,"succeeded":true,"timeoutExceeded":false,"usedAllSpace":false},"status":"complete","title":"E-Commerce predicting customer lifetime value","url":"/dhimananubhav/e-commerce-predicting-customer-lifetime-value?scriptVersionId=22553650","versionNumber":7,"hasVersionNumber":true,"isRedacted":false,"versionAuthor":null},{"id":7374569,"kernelVersionId":null,"isForkParent":false,"isNotebook":true,"languageName":"Python","lastRunTime":"2018-11-14T10:12:22.96Z","linesChangedFromPrevious":0,"linesDeletedFromPrevious":46,"linesInsertedFromPrevious":61,"outputFilesTotalSizeBytes":0,"runInfo":{"dockerfileUrl":"https://github.com/Kaggle/docker-lifetimes@sha256:2c68f11b64cfc056508f6c825bbc6e0112322090f39d3d63dbfcfb9bc3a2c7c3/blob/master/Dockerfile","dockerHubUrl":"https://registry.hub.docker.com/u/kaggle/lifetimes@sha256:2c68f11b64cfc056508f6c825bbc6e0112322090f39d3d63dbfcfb9bc3a2c7c3/","dockerImageId":"sha256:e6c1f46ab7143adc37f0d69cc9837ea26bdd6156ed493fc03aaa4303d9f44346","dockerImageName":"gcr.io/kaggle-user-images/dhimananubhav/lifetimes@sha256:2c68f11b64cfc056508f6c825bbc6e0112322090f39d3d63dbfcfb9bc3a2c7c3","exitCode":0,"failureMessage":"","isValidStatus":true,"runTimeSeconds":115.334957059997,"succeeded":true,"timeoutExceeded":false,"usedAllSpace":false},"status":"complete","title":"Customer lifetime value","url":"/dhimananubhav/e-commerce-predicting-customer-lifetime-value?scriptVersionId=7374569","versionNumber":6,"hasVersionNumber":true,"isRedacted":false,"versionAuthor":null},{"id":7373570,"kernelVersionId":null,"isForkParent":false,"isNotebook":true,"languageName":"Python","lastRunTime":"2018-11-14T09:38:03.433Z","linesChangedFromPrevious":0,"linesDeletedFromPrevious":0,"linesInsertedFromPrevious":0,"outputFilesTotalSizeBytes":0,"runInfo":{"dockerfileUrl":"https://github.com/Kaggle/docker-lifetimes@sha256:2c68f11b64cfc056508f6c825bbc6e0112322090f39d3d63dbfcfb9bc3a2c7c3/blob/master/Dockerfile","dockerHubUrl":"https://registry.hub.docker.com/u/kaggle/lifetimes@sha256:2c68f11b64cfc056508f6c825bbc6e0112322090f39d3d63dbfcfb9bc3a2c7c3/","dockerImageId":"sha256:e6c1f46ab7143adc37f0d69cc9837ea26bdd6156ed493fc03aaa4303d9f44346","dockerImageName":"gcr.io/kaggle-user-images/dhimananubhav/lifetimes@sha256:2c68f11b64cfc056508f6c825bbc6e0112322090f39d3d63dbfcfb9bc3a2c7c3","exitCode":0,"failureMessage":"","isValidStatus":true,"runTimeSeconds":17.5372447359987,"succeeded":true,"timeoutExceeded":false,"usedAllSpace":false},"status":"complete","title":"Customer lifetime value","url":"/dhimananubhav/e-commerce-predicting-customer-lifetime-value?scriptVersionId=7373570","versionNumber":5,"hasVersionNumber":true,"isRedacted":false,"versionAuthor":null},{"id":6784651,"kernelVersionId":null,"isForkParent":false,"isNotebook":true,"languageName":"Python","lastRunTime":"2018-10-25T10:26:23.603Z","linesChangedFromPrevious":0,"linesDeletedFromPrevious":2,"linesInsertedFromPrevious":4,"outputFilesTotalSizeBytes":0,"runInfo":{"dockerfileUrl":"https://github.com/Kaggle/docker-lifetimes@sha256:2c68f11b64cfc056508f6c825bbc6e0112322090f39d3d63dbfcfb9bc3a2c7c3/blob/master/Dockerfile","dockerHubUrl":"https://registry.hub.docker.com/u/kaggle/lifetimes@sha256:2c68f11b64cfc056508f6c825bbc6e0112322090f39d3d63dbfcfb9bc3a2c7c3/","dockerImageId":"sha256:e6c1f46ab7143adc37f0d69cc9837ea26bdd6156ed493fc03aaa4303d9f44346","dockerImageName":"gcr.io/kaggle-user-images/dhimananubhav/lifetimes@sha256:2c68f11b64cfc056508f6c825bbc6e0112322090f39d3d63dbfcfb9bc3a2c7c3","exitCode":0,"failureMessage":"","isValidStatus":true,"runTimeSeconds":105.689188066001,"succeeded":true,"timeoutExceeded":false,"usedAllSpace":false},"status":"complete","title":"Customer lifetime value","url":"/dhimananubhav/e-commerce-predicting-customer-lifetime-value?scriptVersionId=6784651","versionNumber":4,"hasVersionNumber":true,"isRedacted":false,"versionAuthor":null},{"id":6784407,"kernelVersionId":null,"isForkParent":false,"isNotebook":true,"languageName":"Python","lastRunTime":"2018-10-25T10:13:54.59Z","linesChangedFromPrevious":0,"linesDeletedFromPrevious":5,"linesInsertedFromPrevious":31,"outputFilesTotalSizeBytes":0,"runInfo":{"dockerfileUrl":"https://github.com/Kaggle/docker-lifetimes@sha256:2c68f11b64cfc056508f6c825bbc6e0112322090f39d3d63dbfcfb9bc3a2c7c3/blob/master/Dockerfile","dockerHubUrl":"https://registry.hub.docker.com/u/kaggle/lifetimes@sha256:2c68f11b64cfc056508f6c825bbc6e0112322090f39d3d63dbfcfb9bc3a2c7c3/","dockerImageId":"sha256:e6c1f46ab7143adc37f0d69cc9837ea26bdd6156ed493fc03aaa4303d9f44346","dockerImageName":"gcr.io/kaggle-user-images/dhimananubhav/lifetimes@sha256:2c68f11b64cfc056508f6c825bbc6e0112322090f39d3d63dbfcfb9bc3a2c7c3","exitCode":0,"failureMessage":"","isValidStatus":true,"runTimeSeconds":106.432967739005,"succeeded":true,"timeoutExceeded":false,"usedAllSpace":false},"status":"complete","title":"Customer lifetime value","url":"/dhimananubhav/e-commerce-predicting-customer-lifetime-value?scriptVersionId=6784407","versionNumber":3,"hasVersionNumber":true,"isRedacted":false,"versionAuthor":null},{"id":6784015,"kernelVersionId":null,"isForkParent":false,"isNotebook":true,"languageName":"Python","lastRunTime":"2018-10-25T09:54:47.78Z","linesChangedFromPrevious":0,"linesDeletedFromPrevious":2,"linesInsertedFromPrevious":192,"outputFilesTotalSizeBytes":0,"runInfo":{"dockerfileUrl":"https://github.com/Kaggle/docker-lifetimes@sha256:2c68f11b64cfc056508f6c825bbc6e0112322090f39d3d63dbfcfb9bc3a2c7c3/blob/master/Dockerfile","dockerHubUrl":"https://registry.hub.docker.com/u/kaggle/lifetimes@sha256:2c68f11b64cfc056508f6c825bbc6e0112322090f39d3d63dbfcfb9bc3a2c7c3/","dockerImageId":"sha256:e6c1f46ab7143adc37f0d69cc9837ea26bdd6156ed493fc03aaa4303d9f44346","dockerImageName":"gcr.io/kaggle-user-images/dhimananubhav/lifetimes@sha256:2c68f11b64cfc056508f6c825bbc6e0112322090f39d3d63dbfcfb9bc3a2c7c3","exitCode":0,"failureMessage":"","isValidStatus":true,"runTimeSeconds":80.8002701000005,"succeeded":true,"timeoutExceeded":false,"usedAllSpace":false},"status":"complete","title":"Customer lifetime value","url":"/dhimananubhav/e-commerce-predicting-customer-lifetime-value?scriptVersionId=6784015","versionNumber":2,"hasVersionNumber":true,"isRedacted":false,"versionAuthor":null},{"id":6783270,"kernelVersionId":null,"isForkParent":false,"isNotebook":true,"languageName":"Python","lastRunTime":"2018-10-25T09:24:10.567Z","linesChangedFromPrevious":0,"linesDeletedFromPrevious":0,"linesInsertedFromPrevious":60,"outputFilesTotalSizeBytes":0,"runInfo":{"dockerfileUrl":"https://github.com/Kaggle/docker-lifetimes@sha256:2c68f11b64cfc056508f6c825bbc6e0112322090f39d3d63dbfcfb9bc3a2c7c3/blob/master/Dockerfile","dockerHubUrl":"https://registry.hub.docker.com/u/kaggle/lifetimes@sha256:2c68f11b64cfc056508f6c825bbc6e0112322090f39d3d63dbfcfb9bc3a2c7c3/","dockerImageId":"sha256:e6c1f46ab7143adc37f0d69cc9837ea26bdd6156ed493fc03aaa4303d9f44346","dockerImageName":"gcr.io/kaggle-user-images/dhimananubhav/lifetimes@sha256:2c68f11b64cfc056508f6c825bbc6e0112322090f39d3d63dbfcfb9bc3a2c7c3","exitCode":0,"failureMessage":"","isValidStatus":true,"runTimeSeconds":36.5544032779871,"succeeded":true,"timeoutExceeded":false,"usedAllSpace":false},"status":"complete","title":"Customer lifetime value","url":"/dhimananubhav/e-commerce-predicting-customer-lifetime-value?scriptVersionId=6783270","versionNumber":1,"hasVersionNumber":true,"isRedacted":false,"versionAuthor":null}],"categories":{"categories":[],"type":"script"},"submitToCompetitionInfo":null,"downloadAllFilesUrl":"/kernels/svzip/22553650","submission":null,"menuLinks":[{"href":"/dhimananubhav/e-commerce-predicting-customer-lifetime-value/notebook","text":"Notebook","title":"Notebook","tab":"notebook","count":null,"showZeroCountExplicitly":false,"reportEventCategory":null,"reportEventType":null},{"href":"/dhimananubhav/e-commerce-predicting-customer-lifetime-value/code","text":"Code","title":"Code","tab":"code","count":null,"showZeroCountExplicitly":false,"reportEventCategory":null,"reportEventType":null},{"href":"/dhimananubhav/e-commerce-predicting-customer-lifetime-value/data","text":"Data","title":"Data","tab":"data","count":1,"showZeroCountExplicitly":false,"reportEventCategory":null,"reportEventType":null},{"href":"/dhimananubhav/e-commerce-predicting-customer-lifetime-value/log","text":"Log","title":"Log","tab":"log","count":null,"showZeroCountExplicitly":false,"reportEventCategory":null,"reportEventType":null},{"href":"/dhimananubhav/e-commerce-predicting-customer-lifetime-value/comments","text":"Comments","title":"Comments","tab":"comments","count":1,"showZeroCountExplicitly":true,"reportEventCategory":null,"reportEventType":null}],"rightMenuLinks":[],"callToAction":{"href":"/kernels/fork-version/22553650","text":"Fork Notebook","title":"Fork Notebook","tab":null,"count":null,"showZeroCountExplicitly":false,"reportEventCategory":null,"reportEventType":null},"voteButton":{"totalVotes":31,"medalVotes":7,"hasAlreadyVotedUp":false,"hasAlreadyVotedDown":false,"canUpvote":true,"canDownvote":false,"voteUpUrl":"/kernels/vote?id=1949320","voteDownUrl":null,"voters":[{"avatarThumbnailUrl":"https://storage.googleapis.com/kaggle-avatars/thumbnails/26267-kg.png","displayName":"Regi","profileUrl":"/regivm","tier":"Novice","tierInt":0,"userId":26267,"userName":"regivm"},{"avatarThumbnailUrl":"https://storage.googleapis.com/kaggle-avatars/thumbnails/116931-kg.jpg","displayName":"rsong47","profileUrl":"/renjiesong","tier":"Novice","tierInt":0,"userId":116931,"userName":"renjiesong"},{"avatarThumbnailUrl":"https://storage.googleapis.com/kaggle-avatars/thumbnails/default-thumb.png","displayName":"dhruv_agg","profileUrl":"/da9976","tier":"Novice","tierInt":0,"userId":643748,"userName":"da9976"},{"avatarThumbnailUrl":"https://storage.googleapis.com/kaggle-avatars/thumbnails/740473-gp.jpg","displayName":"SilasShederson","profileUrl":"/shederson","tier":"Novice","tierInt":0,"userId":740473,"userName":"shederson"},{"avatarThumbnailUrl":"https://storage.googleapis.com/kaggle-avatars/thumbnails/1068315-gr.jpg","displayName":"Marlesson","profileUrl":"/marlesson","tier":"Contributor","tierInt":1,"userId":1068315,"userName":"marlesson"},{"avatarThumbnailUrl":"https://storage.googleapis.com/kaggle-avatars/thumbnails/1177633-kg.jpg","displayName":"Haoge","profileUrl":"/haogegogo","tier":"Novice","tierInt":0,"userId":1177633,"userName":"haogegogo"},{"avatarThumbnailUrl":"https://storage.googleapis.com/kaggle-avatars/thumbnails/1312840-fb.jpg","displayName":"NaaSalleh","profileUrl":"/naams91","tier":"Novice","tierInt":0,"userId":1312840,"userName":"naams91"},{"avatarThumbnailUrl":"https://storage.googleapis.com/kaggle-avatars/thumbnails/default-thumb.png","displayName":"Hans Peter Hagblom","profileUrl":"/hhagblom","tier":"Novice","tierInt":0,"userId":1345713,"userName":"hhagblom"},{"avatarThumbnailUrl":"https://storage.googleapis.com/kaggle-avatars/thumbnails/1359779-kg.png","displayName":"Tiago Oliveira","profileUrl":"/tiagoooliveira","tier":"Novice","tierInt":0,"userId":1359779,"userName":"tiagoooliveira"},{"avatarThumbnailUrl":"https://storage.googleapis.com/kaggle-avatars/thumbnails/1537849-kg.jpg","displayName":"Grecnik","profileUrl":"/nikitagrec","tier":"Expert","tierInt":2,"userId":1537849,"userName":"nikitagrec"},{"avatarThumbnailUrl":"https://storage.googleapis.com/kaggle-avatars/thumbnails/1549225-kg.jpg","displayName":"Andre Sionek","profileUrl":"/andresionek","tier":"Expert","tierInt":2,"userId":1549225,"userName":"andresionek"},{"avatarThumbnailUrl":"https://storage.googleapis.com/kaggle-avatars/thumbnails/default-thumb.png","displayName":"pauroger","profileUrl":"/caixaofaixa","tier":"Novice","tierInt":0,"userId":1558412,"userName":"caixaofaixa"},{"avatarThumbnailUrl":"https://storage.googleapis.com/kaggle-avatars/thumbnails/1566519-kg.jpg","displayName":"Aguiar","profileUrl":"/jsaguiar","tier":"Master","tierInt":3,"userId":1566519,"userName":"jsaguiar"},{"avatarThumbnailUrl":"https://storage.googleapis.com/kaggle-avatars/thumbnails/default-thumb.png","displayName":"NikoS","profileUrl":"/nikosmol","tier":"Novice","tierInt":0,"userId":1683712,"userName":"nikosmol"},{"avatarThumbnailUrl":"https://storage.googleapis.com/kaggle-avatars/thumbnails/default-thumb.png","displayName":"Petar","profileUrl":"/pz5545","tier":"Novice","tierInt":0,"userId":1751277,"userName":"pz5545"},{"avatarThumbnailUrl":"https://storage.googleapis.com/kaggle-avatars/thumbnails/1920818-kg.JPG","displayName":"Prashant Banerjee","profileUrl":"/prashant111","tier":"Master","tierInt":3,"userId":1920818,"userName":"prashant111"},{"avatarThumbnailUrl":"https://storage.googleapis.com/kaggle-avatars/thumbnails/default-thumb.png","displayName":"siddhi_1210","profileUrl":"/siddhi1210","tier":"Novice","tierInt":0,"userId":2112971,"userName":"siddhi1210"},{"avatarThumbnailUrl":"https://storage.googleapis.com/kaggle-avatars/thumbnails/2330415-fb.jpg","displayName":"Givaldo","profileUrl":"/givaldofrancisco81","tier":"Novice","tierInt":0,"userId":2330415,"userName":"givaldofrancisco81"},{"avatarThumbnailUrl":"https://storage.googleapis.com/kaggle-avatars/thumbnails/default-thumb.png","displayName":"Robson","profileUrl":"/robsonol","tier":"Novice","tierInt":0,"userId":2453372,"userName":"robsonol"},{"avatarThumbnailUrl":"https://storage.googleapis.com/kaggle-avatars/thumbnails/2465822-kg.jpg","displayName":"Adil","profileUrl":"/atmosone","tier":"Novice","tierInt":0,"userId":2465822,"userName":"atmosone"},{"avatarThumbnailUrl":"https://storage.googleapis.com/kaggle-avatars/thumbnails/2493147-kg.png","displayName":"Ankur Singh","profileUrl":"/ankur39","tier":"Novice","tierInt":0,"userId":2493147,"userName":"ankur39"},{"avatarThumbnailUrl":"https://storage.googleapis.com/kaggle-avatars/thumbnails/2696572-gp.jpg","displayName":"Suma","profileUrl":"/sumasree1234","tier":"Novice","tierInt":0,"userId":2696572,"userName":"sumasree1234"},{"avatarThumbnailUrl":"https://storage.googleapis.com/kaggle-avatars/thumbnails/default-thumb.png","displayName":"Anisha Ganguly","profileUrl":"/anishagan26","tier":"Novice","tierInt":0,"userId":2733225,"userName":"anishagan26"},{"avatarThumbnailUrl":"https://storage.googleapis.com/kaggle-avatars/thumbnails/2875976-gp.jpg","displayName":"Lolwah K.D","profileUrl":"/lolwahkd","tier":"Novice","tierInt":0,"userId":2875976,"userName":"lolwahkd"},{"avatarThumbnailUrl":"https://storage.googleapis.com/kaggle-avatars/thumbnails/3115335-kg.jpg","displayName":"Richard Nnamdi","profileUrl":"/richardnnamdi","tier":"Contributor","tierInt":1,"userId":3115335,"userName":"richardnnamdi"},{"avatarThumbnailUrl":"https://storage.googleapis.com/kaggle-avatars/thumbnails/default-thumb.png","displayName":"Geoffnel","profileUrl":"/geoffnel","tier":"Novice","tierInt":0,"userId":3388491,"userName":"geoffnel"},{"avatarThumbnailUrl":"https://storage.googleapis.com/kaggle-avatars/thumbnails/default-thumb.png","displayName":"Eduardo_Sereguin","profileUrl":"/eduardosereguin","tier":"Novice","tierInt":0,"userId":3405279,"userName":"eduardosereguin"},{"avatarThumbnailUrl":"https://storage.googleapis.com/kaggle-avatars/thumbnails/3585984-kg.png","displayName":"victoraleff","profileUrl":"/victoraleff","tier":"Contributor","tierInt":1,"userId":3585984,"userName":"victoraleff"},{"avatarThumbnailUrl":"https://storage.googleapis.com/kaggle-avatars/thumbnails/default-thumb.png","displayName":"luke_27","profileUrl":"/venmani27","tier":"Novice","tierInt":0,"userId":3629088,"userName":"venmani27"},{"avatarThumbnailUrl":"https://storage.googleapis.com/kaggle-avatars/thumbnails/default-thumb.png","displayName":"xushaozhi","profileUrl":"/xushaozhi","tier":"Novice","tierInt":0,"userId":3721939,"userName":"xushaozhi"},{"avatarThumbnailUrl":"https://storage.googleapis.com/kaggle-avatars/thumbnails/4270234-kg.png","displayName":"Alvin Varghese","profileUrl":"/avarghese","tier":"Novice","tierInt":0,"userId":4270234,"userName":"avarghese"}],"currentUserInfo":{"avatarThumbnailUrl":"https://storage.googleapis.com/kaggle-avatars/thumbnails/default-thumb.png","displayName":"Alireza Alizadegan","userName":"alizadegan","profileUrl":"/alizadegan","tier":"Novice","tierInt":0,"userId":3743521},"showVoters":true,"alwaysShowVoters":true},"parentDataSource":null,"parentName":"Brazilian E-Commerce Public Dataset by Olist","parentUrl":"/olistbr/brazilian-ecommerce","thumbnailImageUrl":"https://storage.googleapis.com/kaggle-datasets-images/55151/105464/d59245a7014a35a35cc7f7b721de4dae/dataset-thumbnail.png?t=2018-09-21-16-21-21","canWrite":false,"canAdminister":false,"currentUserHasForked":false,"forkParentIsRedacted":false,"forkDiffLinesChanged":0,"forkDiffLinesDeleted":0,"forkDiffLinesInserted":0,"forkDiffUrl":null,"forkParentAuthorDisplayName":null,"forkParentAuthorUrl":null,"forkParentTitle":null,"forkParentUrl":null,"canSeeDataExplorerV2":true,"canSeeInnerTableOfContents":true,"simplifiedViewer":false,"kernelOutputDataset":null});performance && performance.mark && performance.mark("KernelViewer.componentCouldBootstrap");</script>

<form action="https://www.kaggle.com/dhimananubhav/e-commerce-predicting-customer-lifetime-value" id="__AjaxAntiForgeryForm" method="post"><input name="X-XSRF-TOKEN" type="hidden" value="CfDJ8LdUzqlsSWBPr4Ce3rb9VL_7wMnxmdNbpy9ll-WS9_4Mx_fhp7XP1Kdk7I5Rhm80KPkotPVlFvkgH_v2SuGMtHpuBrypC4was6LcQ8bE3Mo6IsWWjdbM6spI6EerOzqqnT2zq63QkyqmtS-KodayQ4pMwuiYu-AGbHJ_2Cz2x-tcviuQwfSUu2iOyMGZ3nA5ag"></form>
<script nonce="" type="text/x-mathjax-config;executed=true">
    MathJax.Hub.Config({
    "HTML-CSS": {
    preferredFont: "TeX",
    availableFonts: ["STIX", "TeX"],
    linebreaks: {
    automatic: true
    },
    EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50)
    },
    tex2jax: {
    inlineMath: [["\\(", "\\)"], ["\\\\(", "\\\\)"]],
    displayMath: [["$$", "$$"], ["\\[", "\\]"]],
    processEscapes: true,
    ignoreClass: "tex2jax_ignore|dno"
    },
    TeX: {
    noUndefined: {
    attributes: {
    mathcolor: "red",
    mathbackground: "#FFEEEE",
    mathsize: "90%"
    }
    }
    },
    Macros: {
    href: "{}"
    },
    skipStartupTypeset: true,
    messageStyle: "none"
    });
</script>
<script nonce="" type="text/javascript" async="" crossorigin="anonymous" src="./E-Commerce predicting customer lifetime value _ Kaggle_files/MathJax.js.download"></script>


<script type="text/javascript" nonce="">
    window.addEventListener("message", function(event) {
        if (event.origin !== "https://www.kaggleusercontent.com" &&
            !event.origin.match(/^http:\/\/localhost/)) {
            return;
        }

        if (typeof event.data === "object" &&
            event.data.name === "getResourceUrls") {
            event.source.postMessage({
                name: "setResourceUrls",
                scripts: [
                    "/static/assets/notebookviewer.js?v=2fe21b8125af87991205",
                    "/static/assets/vendor.js?v=c4a91d9a4b2079bfeb52",
                ],
                styles: [
                    "/static/assets/notebookviewer.css?v=ba9a5a399d463b503f1f",
                    "/static/assets/vendor.css?v=6476c0ac5e57e890b785",
                ],
            }, event.origin);
        }
    });
</script>
        </div>

            <div class="site-layout__footer">
                <footer class="site-footer">
    <div class="site-footer__content">
        <div class="site-footer__copyright">
            <span>© 2020 Kaggle Inc</span>
        </div>
        <nav class="site-footer__nav">
            <a href="https://www.kaggle.com/team">Our Team</a>
            <a href="https://www.kaggle.com/terms">Terms</a>
            <a href="https://www.kaggle.com/privacy">Privacy</a>
            <a href="https://www.kaggle.com/contact">Contact/Support</a>
        </nav>
        <nav class="site-footer__social">
            <div data-component-name="SocialIcons" style="display: flex; flex-direction: column; flex: 1 0 auto;"><div style="--mdc-theme-on-primary:#fff; --mdc-theme-on-surface:rgba(0, 0, 0, 0.87); --mdc-theme-text-primary-on-background:rgba(0, 0, 0, 0.87); --mdc-theme-text-secondary-on-background:rgba(0, 0, 0, 0.54); --mdc-theme-text-hint-on-background:rgba(0, 0, 0, 0.38); --mdc-theme-text-disabled-on-background:rgba(0, 0, 0, 0.38); --mdc-theme-text-icon-on-background:rgba(0, 0, 0, 0.38); --mdc-theme-primary:#20BEFF; --mdc-theme-error:#F58B8A; --mdc-theme-background:#F8F8F8; --mdc-theme-surface:#F8F8F8; --mdc-theme-primary-bg:#20BEFF; --mdc-theme-secondary-bg:#919294;"><div class="social-icons"><a class="social-icons__link" href="https://www.youtube.com/kaggle" title="Follow Kaggle on YouTube"><i class="fa fa-youtube-square"></i></a><a class="social-icons__link" href="http://www.twitter.com/kaggle" title="Follow Kaggle on Twitter"><i class="fa fa-twitter-square"></i></a><a class="social-icons__link" href="http://www.facebook.com/kaggle" title="Follow Kaggle on Facebook"><i class="fa fa-facebook-square"></i></a><a class="social-icons__link" href="http://www.linkedin.com/company/kaggle" title="Follow Kaggle on LinkedIn"><i class="fa fa-linkedin-square"></i></a></div></div></div><script nonce="">var Kaggle=window.Kaggle||{};Kaggle.State=Kaggle.State||[];Kaggle.State.push({});performance && performance.mark && performance.mark("SocialIcons.componentCouldBootstrap");</script>
        </nav>
    </div>
</footer>

            </div>
    </div>



    <!-- Cheers, web-5b85dcbfdd-w827rp. -->

    </main>


<iframe id="intercom-frame" style="position: absolute !important; opacity: 0 !important; width: 1px !important; height: 1px !important; top: 0 !important; left: 0 !important; border: none !important; display: block !important; z-index: -1 !important;" aria-hidden="true" tabindex="-1" title="Intercom" src="./E-Commerce predicting customer lifetime value _ Kaggle_files/saved_resource.html"></iframe><div id="intercom-css-container"><style data-emotion="intercom-global"></style></div><div id="intercom-container" class="intercom-namespace"><style>html.intercom-mobile-messenger-active,html.intercom-mobile-messenger-active > body,html.intercom-modal-open,#intercom-container-body{overflow:hidden !important;}html.intercom-mobile-messenger-active,html.intercom-mobile-messenger-active > body{position:static !important;}html.intercom-mobile-messenger-active > body{height:0 !important;margin:0 !important;}iframe#intercom-frame{position:absolute !important;opacity:0 !important;width:1px !important;height:1px !important;top:0 !important;left:0 !important;border:none !important;display:block !important;z-index:-1 !important;}</style><div class="intercom-app" aria-live="polite"><div id="intercom-modal-container"></div></div></div></body></html>